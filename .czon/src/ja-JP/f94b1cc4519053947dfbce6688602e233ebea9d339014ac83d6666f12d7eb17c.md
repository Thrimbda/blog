---
"title": "Notion MCP の OpenCode における設定と使用ガイド"
"summary": "本ドキュメントは、OpenCode で Notion MCP サーバーを設定および使用するための完全なガイドです。まず、リモート MCP サーバーを通じた設定が正常に完了したことを確認し、`opencode.json` に保存された具体的な設定例を提供します。次に、OAuth 認証が正常に完了し、認証トークンが安全に保存されていることを説明します。本文の核心部分では、Notion ツールの使用方法を詳細に説明しており、サーバーステータスの確認、プロンプト内でのツールの参照方法、利用可能なツールの範囲（ページの検索、コンテンツの取得、データベースの管理など）が含まれます。さらに、再認証、ログアウト、およびトラブルシューティングの手順も提供されています。代替案としてのローカル MCP サーバーの設定方法にも触れ、セキュリティ上の注意点を強調しています。最後に、設定完了日を 2026年1月18日 と記載しています。"
"tags":
  - "Notion"
  - "MCP"
  - "OpenCode"
  - "設定ガイド"
  - "API 連携"
  - "自動化"
  - "開発ツール"
"date": "2026-01-18"
---

# OpenCode 向け Notion MCP セットアップ

## 設定完了

Notion MCP は、OpenCode のリモート MCP サーバーを使用して正常に設定されました。設定は `opencode.json` に保存されています：

```json
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "notion": {
      "type": "remote",
      "url": "https://mcp.notion.com/mcp",
      "enabled": true
    }
  }
}
```

## 認証ステータス

✅ **認証成功**

お使いの Notion アカウントは OAuth を介して接続されました。認証トークンは OpenCode のローカルストレージに安全に保存されています。

## 使用方法

### 1. MCP サーバーステータスの確認
```bash
opencode mcp list
```

### 2. OpenCode で Notion ツールを使用する
OpenCode を使用する際、プロンプト内で Notion ツールを参照できます。プロンプトの例：

```
Notion ツールを使用して、私のワークスペース内の「プロジェクト計画」に関するページを検索してください
```

```
Notion ツールを使用して、最近の Notion データベースを一覧表示してください
```

```
Notion ツールを使用して、特定の Notion ページのコンテンツを取得してください
```

### 3. 利用可能な Notion ツール
Notion MCP サーバーは以下のツールを提供します：
- ページとデータベースの検索
- ページコンテンツの取得
- ページの作成と更新
- データベース（現在はデータソースと呼ばれます）の操作
- コメントの管理
- その他

### 4. 必要に応じて再認証を行う
認証の有効期限が切れた場合：
```bash
opencode mcp auth notion
```

### 5. 認証の削除
```bash
opencode mcp logout notion
```

## セキュリティに関する注意点

- OAuth トークンは `~/.local/share/opencode/` に安全に保存されます
- リモート MCP サーバー (https://mcp.notion.com/mcp) は Notion によって管理されています
- Notion データへのアクセスは、OAuth 時に承認した範囲に限定されます
- ローカルの API トークンは必要なく、保存もされません

## トラブルシューティング

ツールが動作しない場合：

1. 接続ステータスを確認します：
   ```bash
   opencode mcp debug notion
   ```

2. 再認証を行います：
   ```bash
   opencode mcp logout notion && opencode mcp auth notion
   ```

3. OpenCode のログでエラーを確認します

## 代替案：ローカル MCP サーバー

OAuth ではなく、ご自身の API トークンでローカル MCP サーバーを使用する場合：

1. `opencode.json` を更新します：
```json
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "notion": {
      "type": "local",
      "command": ["npx", "-y", "@notionhq/notion-mcp-server"],
      "environment": {
        "NOTION_TOKEN": "{env:NOTION_TOKEN}"
      }
    }
  }
}
```

2. `.env` ファイルを更新します：
```
NOTION_TOKEN=ここにあなたのNotion統合トークンを入力
```

3. OpenCode を再起動します

---

**設定完了日：2026年1月18日**