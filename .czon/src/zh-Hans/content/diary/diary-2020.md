---
"title": "2020 工作日志"
"summary": "本文档是作者2020年上半年的工作日志，详细记录了日常开发任务，包括限速编译、自定义限速、bug修复、代码重构、技术调研（如内存泄漏、\
  PolyLine修复）、团队协作（如接口讨论、代码审查）以及个人成长反思。日志展现了软件工程师在复杂项目（如高精地图编译系统）中面临的技术挑战、问题解决过\
  程、项目管理思考（如迭代交付、重构风险）和职业心态调整。核心论点包括：技术方案需要权衡短期与长期收益；在交付前应避免大规模重构；工程师应关注问题本质而非盲\
  目追随技术潮流；保持记录和反思对个人成长至关重要。"
"tags":
  - "工作日志"
  - "软件开发"
  - "技术反思"
  - "项目管理"
  - "bug修复"
  - "代码重构"
  - "高精地图"
"date": "2020-01-01"
---

### 2020-04-13

- 完成了绩效自评
- 对于Lane Center Aggregation的修订

### 2020-04-14

- [ ] 限速编译
- [ ] 自定义限速

### 2020-04-15

- 确定自定义限速方案 @guangcong
  1. 使用新的module-dynamicEvent来解决这个问题
  2. 自定义限速更新作为一种新的事件发布触发horizon data的更新
  3. 需要考虑异常判断和内存问题
     和广聪讨论之后，广聪遇到一些问题
- 晓康review
  Java作为一种solid的语言还是很有东西的
- 限速编译
  基本没什么进展，增加了抽取RoadCenterTile的逻辑
- Sectioning问题解决，分析edgeLifting优化方案，提出优化算法：
  给定traverse头和connectivity函数，遍历方式给出
- 研究自执行Jar的原理

### 2020-04-16

- 跟逸铭对清楚custom speed limit的接口：他保证输入的location pair一定可以确定一个唯一最短route
  回来后跟广聪梳理生成custom speed limit的算法
  1. 给定route
  2. 已知| start DiRoadOnPath::count - end DiRoadOnPath::count | ≤ 1
     则一定可以求得一对( start DiRoadOnPath, end DiRoadOnPath)使得其距离最短
- 给晓康临时发布一个可用的pylon-v0.1.1编译器快照版本
- 跟汉腾下楼乱逛吹牛逼
- 跟梓哲一诚对清楚SUMO地图使用接口
- speed Limit编译成功但还没有验证

### 2020-04-17

- SpeedLimit编译验证：
  OSMSerializable不太行，因为为绑定后的SpeedLimit没有geometry
  可能会有问题：匝道汇入时限速绑定会出现问题
- [ ] 插值
- [ ] 霍斯多夫距离
- [ ] LcInJunctionTile

#### 一些奇思妙想

- 直接上spark？
- OSM的Context需要什么

### 2020-04-18

完成了限速

### 2020-04-20

#### 自定义限速

- 广聪将输入变成了一个vector，添加了测试
- 一个小问题就是，广聪并不真正了解c++指针的作用原理
- [ ] 也许尝试解决一下[https://github.com/scalameta/scalafmt/issues/337](https://github.com/scalameta/scalafmt/issues/337)？
- [ ] 把大叔共享的文件做成匿名分享通过resillo sync

#### RoadBorder修复

发现是自己做了错误的假设，在rc中记录的lc和rb信息可能存在：

1. lc只有一个，因此不能假设lc一定有至少两个
2. 某一边的rb可能不存在，因此不能假设rb一定存在

### 2020-04-21

#### RoadBorder修复

- 完成了测试用例的迁移
- 完善了Dune，以及其ReadMe使得它可以直接输出测试数据
  和威宇聊了一下，展望未来，我专注于编译系统

#### 对向车道POI绑定

- 对multidigitize之后的数据进行 binding

### 2020-04-22

#### 对向车道POI绑定

- 对multidigitize之后的数据进行 binding
- 构造测试数据

### 2020-04-23

- 完成了对象车道POI绑定并debug结束[4]

### 2020-04-27

今天主要是以下事项

#### 完成同步mdm proto和mdm spec

1. 和林楠一起修改了若感触mdm spec中表述错误的部分
2. 留下了若干我和林楠不能独自决定的遗留项
3. 在 2020-04-26 晨会上决定将最麻烦的LaneSplitMerge和Polyline延后修改
4. 完成了proto的修改
5. 完成了nexus的修改
6. 完成了mdk的修改
7. 顺便还修复了一个测试数据的问题（疯狂报数据错误）

#### bug修复

临近430发版，bug数量激增

[HDMAPMDK-1111](https://jira.momenta.works/browse/HDMAPMDK-1111) 分析完毕

- [ ] 自动复制测试用例脚本
- [ ] 导出apple reminder

### 2020-04-28

考了科一用了半天时间

HDMAPMDK-1130 宽度问题，三个问题

1. spec规定在变道时候没有车道宽度
2. intersecion线太长导致的split line

HDMAPMDK-1121重新修复

状态极差

### 2020-04-29

#### bugfix

- HDMAPMDK-1143
  RoadObstacle没有编译的问题
- HDMAPMDK-1090

### 2020-05-06

#### Du Valid

- 使用mill
- 使用nexus-osm

#### Brain Strom

### 2020-05-08

#### 内存泄漏问题

- 内存泄漏问题的直接原因是因为new 了野指针之后没有delet
- 在update current position之后 map kit 调用了prepareGuidanceData，目的是找到离当前位置最近的guidance data
- prepareGuidanceData调用了NavInfoProviderImpl::getTrafficLights & NavInfoProviderImpl::getCarParks
- 以NavInfoProviderImpl::getTrafficLights为例，是在调用时new出NaviEventOnPath中的数据指针
- 然而并没有delete
- 还发现DestEvent存在这个问题

解决方案：核心在于不允许野指针存在，决定对NaviEventProvider做一个重构

- 首先在NaviInfoProvider中添加两个field traffic*light_events* & car*park_events*
- 在NaviInfoGenerator中，route updated之后更新这两个field
- 然后在每次get的时候根据当前车辆位置做一个过滤
- 因此要重构`PathReader::getAttributes`，原因在于之前的实现只考虑了相对于当前车的offset，现在需要一个相对于Path的Offset接口

### 2020-05-09

#### PolyLine修复以及测试

PolyLine的问题主要在于有可能在PolyLine生成的时候给重复点进去，从而导致一系列几何有关segment的计算问题：

1. 向量计算，两个重复点计算出零向量
2. 长度计算，segment长度为0，很容易出Nan问题

于是在构造PolyLine时，对PolyLine中的点进行检查，如果有发现重复点，就抛出异常

检查出下列问题：

- Jts中getEnd出现问题
- Jts LinearLocation会存在normalize的问题

  ```scala
  val loc1 = new LinearLocation(0, 1, 1.0)
  val loc2 = new LinearLocation(0, 2, 0.0)

  loc1 compareTo loc2
  // the output is -1
  ```

- Interpolate的时候有可能会取到两个过于近的点

### 2020-05-11

- HDMAPMDK-1122
  道路边缘线缺失问题没有复现，决定不再花时间调研原因
- 代谢增长论半小时
- Visitor重构使得它支持同起点终点的line
- 准备了一个面试题

### 2020-05-12

- 面试：两个候选人均不合格，思考如何快速甄别候选人，耗时3小时
- bugfix: HDMAPMDK-1211 删除错误border问题，在上次修复中没有修复成功
  有思路了但没写完
- 去健身了

### 2020-05-13

Bugfix: HDMAPMDK-1211 想到解法

- 根本原因是因为产线切分不合理

#### 原因分析

可以看到，在车道变道还没有结束时（车道中心线正在跨越车道线），就已经进行了切分，且这种切分是有可能跨越Rp的。

由于附着在lanecenter形状点上的lane border观测信息会忠实地根据几何，利用scan line的方式将两侧的车道线记录下来，没有根据语再过滤。因此在车道线跨越车道的位置，与车道线相交的车道中心线会将该车道线同时记录在左右lane border ref上

在现有的代码逻辑下，根据语义对相交车道线的border ref进行过滤时会根据车道变道类型推断出待删除的border ref

而当前逻辑在碰到这类切分的时候失效，从而导致这个问题。

#### 解法

核心点在于**找到相交车道线的变道趋势**，考虑到这类切分可能跨越rp，因此过滤不应当以rp为单位进行。

1. 首先将车道线利用edge lifting组织成path（可以为日后的graph重构考虑）: Seq[LaneCenter]
2. 找到待修正lane Center，以及待修正的lane border（这里假设这类lane Center一定是变道导致的）
3. 根据laneCenter path计算出该LaneCenter的变道趋势
4. 做过滤

交给了子良做

面试一人没过

### 2020-05-14

HDMAPMDK-1132 杆牌车道线端点的 id tracing

杆牌车道线端点面临的tracing问题相比较于线性object的tracing十分简单，只存在Id的映射，而没有offset和length的映射。

然而要考虑的问题也不少：

1. Procedure
2. Id Typing System是一个顽疾，需要想办法应对

本质上这个问题的根源在于，我们在定义Id的时候全部使用了Long Id，而MDM的定义中使用了Int，很有可能造成溢出问题。

### 2020-05-15

#### Bug修复

- HDMAPMDK-1215完成
- HDMAPMDK-1218 Done

### 2020-05-18

对OSM Assembler进行重构，使用了之前的OSM serialize，代码理解的难易度和编写的容易成都都有所提高

### 2020-05-19

解了一个OSM Assembler的bug，（其实也不算bug）

今天开了sprint planning会议：
本sprint要干的事情并不多，但是需要思考的事情很多。这是一个健康的状态

### 2020-05-20

- [ ] 写文档描述当前nexus/mdk CI状态，以及需求。
- [x] 关注HDMAPMDK-1263 bug
  - 确实是产线切分问题
- [ ] 约杨川会讨论CI
- [ ] HDMAPMDK-1262
      没干完
- [x] Custom Speed Limit的问题

### 2020-05-21

#### TODOs

- [x] 跟乔波打招呼
- [x] HDMAPMDK-1262
- [x] HDMAPMDK-755

#### Works

- 早上去镱铭工区在线debug昨天的hotfix，结果是因为offset的原因。昨天写的时候太仓促了，并且完全没有添加测试，这类行为不应该再发生。以为自己节省了很多时间，**结果却浪费了更多时间**。
- 1262拿不到数据的原因是MDK没有加载lane level的road mark（以及 road obstacle）
- 帮杜哥编译了数据

### 2020-05-22

这天我干啥了？？？？
我干啥了啊？？？？

### 2020-05-25

今天接到一个新任务：HDMAPMDK-1249-调研使用道路几何信息计算lane aggregation的方法。使得这周的任务变多了一些，截止目前我还有三件事要做：

1. 1249
2. 组内CI Pipeline的现状、需求和方案
3. Nexus graph重构

每一件事都是需要仔细构思并不轻松的事情，但遗憾的是我并不能针对每一件事情清楚地估计出时间来，都只是威宇预估好，写在jira任务的story points里面，有一点我很清楚：**如果我不开始估计和回顾，那我就永远也估计不准**。所以从这次开始要仔细估计。

另外我计划今天开始搞1249，因为是业务上的事情，一般来说会较为紧急一点，而且威宇也会更加在意这个，至于重构的事情的话，如果我自己不上心，那可能也没人会在意了（因为很残酷，不影响功能，却影响效率，而效率是最难以测量的，就连我自己也只有定性的分析）

### 2020-05-26

今天突发事情很多，先是parking报出了两个bug，原计划今天交付，因为这两个bug的原因就不能够今天交付了，王维跟下游商量推迟了两天到后天再交付，于是我这两天的主要工作又变成了解bug。让我不禁思考交付时候的排期是否合理。然后是HDMAPMDK-1290的问题。

今天完成的事情：

- HDMAPMDK-1290的后续：在极其接近stop line的时候match的lane offset会比lane length更长

  > 花了一整天的时间去调研并想办法解决这个问题（目前时间晚上8:56），效率非常低。

  其本质原因是MDK在计算长度时是计算每两个点的长度就取一个coordinate transform这样下来虽然会更准确，但是会使得结果有极强的不确定性。

  最后使用一个算是hack的办法：只要计算的offset比长度长，就只取长度。

- HDMAPMDK-1297 停车位绑定错
  虽然快要到原定的下班时间（晚上九点），我今天一定要至少把这个问题分析出来！
  害，搞定了。结果是个简单的问题

### 2020-05-27

今天不出意外的话要做完CI Pipeline的事情

结果出意外了- -

收到逸铭反馈的bug：

1. 红绿灯绑定：本应该绑定在待转区的红绿灯绑定在了待转区前的partition上了，已经修复(1.5h)
2. 红绿灯漏绑定：没复现出来
   更新：经过一轮艰难的debug，终于找到问题所在，是编译时rc与offset绑定时候用的geometry并不是同一根线，导致的offset超出road长度，所以找不到traffic light（2h）

### 2020-05-28

明天考科二，今天练车一天，下午5点才回来。感觉还不错，希望明天能过。

开始了CI Pipeline的现状描述和需求分析- -

### 2020-05-29

结果没过。害，我太难了。

早上去考试了，下午干了几件事情

1. 去逸铭那里看了一个异常情况，结果是两个bug。
2. 下午townhall完同步了一下MDK python binding的事情。
3. 和单乐威宇一起去楼下解决下游的问题，最后总结出一个短期方案一个长期方案。

我发现遇到一些突发的问题，一般来说解决问题的方法应该就是这个模式：
一个短期方案，一个长期方案。因为问题所暴露出来的价值是一定的，并且是有时效性的。因此短期方案着眼于快准狠地解决燃眉之急。那还需不需要长期方案了呢？一般来说是需要的，因为一个问题的特例反映了一类之前的没有考虑到的解决方案的盲点，这时候分析问题产生的原因并系统地解决它，使得这类问题以后都可以得到很好地解决，使得原先的解决方案更加完整。不需要长期方案的情况也有，那就是这个问题**在彻底地分析之后**我们判断得到结论：系统地解决这个问题的代价要比收益高。（即使是这样，大多数情况下我们主观上还是想去系统地解决它的，作为一个工程师谁不希望系统地解决问题呢？但这也就留下了一个陷阱，使得人有可能去解决那些重要不紧急的事情，或者既不重要也不紧急的事情，从而浪费了本可以用来解决其他更有价值的问题的宝贵时间。）

4. 晚上回来继续搞CI Pipeline的事情。

### 2020-06-01

今天早上一来就去逸铭那里分析问题，分析了一早上。结果是之前的一个已知问题（老版编译器差值导致的点缺失）导致的另一个问题：抓路时候正好到缺失线段附近，从而lane offset是负值。

结果干到了好几点4点，在一阵低效而痛苦的熬夜之后（感觉在目前的状态下只要熬夜，基本上就会和低效挂钩）

### 2020-06-02

下午才来，为了镱铭上车，解决了一些bug，赶上了逸铭晚上的上车。

### 2020-06-03

早上一来就去给逸铭解决晚上发现的问题，就是红绿灯拿不到的问题

### 2020-06-04

今早要干三件事：

1. 数据的清洗，并上传最终0605的数据
2. 查看宽度异常问题 - 是因为该位置没有车道
3. 查看差值点给错车道问题
4. 复查

### 2020-06-05

紧张刺激的一天，完成了HDMAPMDK-1347和HDMAPMDK-1352，还做了一个大重构。

学到了宝贵的一课：在临近交付的时候不要作死做超大更改，因为在没有足够QA测试的情况下，多么牛逼的重构都可能带来风险，同时在没有足够时间做设计的review（我指的是自己，因为有时候在写着写着的时候会发现可能设计错了，不过在实现的时候发现设计有问题其实是另一个问题——即太早动手）

周一补充：
在这一天紧张刺激的重构中，我几乎没闲着，甚至都来不及思考，只能凭借这熟悉和心流，以极高的效率写代码，其实如果不考虑前面的不应该在交付前做大重构的原则的话，其实我非常享受这种状态。但是一切都是要有一个目标和意义的，不能光顾着自己爽，否则这种爽就成为了一种低级趣味。

### 2020-06-08

周六搬来了北京工作,

重新回到北京工作的感觉还真令人有点不适应，一切都变了，首先我没了工位（秀赟招来了一个实习生，为了工作方便就由她的实习生坐着了），这是所有失落中最不适的一个。就好像我高二来到了一班之后坐在新的位置上谁也不认识，也不想跟他们说话，这里的人都显得熟悉而陌生，我似乎感觉到在这里我的朋友很少，这一点我凭理智判断是错觉。但是不想跟人交流，想找个角落待着的感觉是真的，而且我也确实找了一个角落待着，在瑀璋的旁边。为什么不想跟人交流呢，我还是想不通这个问题，也许是因为师出无名？问为什么来北京，以及来待多久，我都支支吾吾的说一段时间，一两个月吧；又也许说明本质上自己还是一个内向的人，不愿意麻烦，特别在意自己在别人眼中是不是显得蠢。然而我越写越觉得第二个的成分更多也更不必要。一来，显得蠢总比真的蠢好，认真的想别人求教，哪怕笨拙也好。别怕，年轻的时候别怕。任何时候都别怕。All is well.

然后说一下工作，这段时间忙完了交付，主要是TLM(typed lane model)的重构，这次要明确目标，然后控制住自己，不要冲动地重构，要有策略的，有控制自己的进度的。

另外我还把台式机搞好了，原来之前一直连不上网是因为我密码改了，在某一次断电之后，网络就彻底失去了连接。于是还要装一下机子，这次目标按优先级是

1. 生产力
2. 酷
3. 好看

今天看了很久王垠的博客- -持续解毒中，我之前总是一个癫狂的宗教分子，看事情看不到其本质。总会觉得什么东西就是解决所有问题的终极手段，可是其实这种"终极手段"其实很少有，大部分时候其实只是宗教狂热，比如

- Vim vs Emacs
- OOP vs FP
- Go vs Rust

等等等等。。。我过去刚刚接触OOP的时候，就觉得OOP是无敌的，可以解决一切问题，可是最后也就是写出了一个天下大同类，其实有没有这个类都无所谓，真正有用的是这个类下的一个个函数。后来（这两年）接触了FP，就觉得FP是解决一切问题的银弹，可是用Scala写了一段时间程序之后发现自己的生产力没有很好的提升，反而是会因为纠结语法，纠结Immutable而导致自己的效率变低。

### 2020-06-09

找到了一点状态，装好了Arch，感觉用起来甚至比mac要舒服？

和瑀璋玩了好一会酒馆战棋- -

### 2020-06-10

今天计划做这几件事情：

1. HDMAPMDK-1199 RoadMark 成为子类，提供更丰富的信息
2. HDMAPMDK-892 提供经验轨迹

如果还有余力，就搞一下发版本的文档。

结果搞定了892

### 2020-06-11

review了HDMAPMDK-892- 提供经验轨迹

发现MDK还没有做对应的适配，今天下午就在做这个适配

做完了适配，好累哦。

继续折腾我的Arch，试图把自己装机的一些步骤记录下来作为自动化的一部分。

### 2020-06-12

今天的任务是搞定 HDMAPMDK-1199，之前把这个问题忘记了。

结果终于在八点的时候搞定了

### 2020-06-13

非常悠闲的一天，提测之后一直在捣鼓自己的自动化脚本们

一开始还打算用shell来写，可是我是在不喜欢shell，就开始折腾scheme了，真爽哦。

### 2020-06-15

哇，现在3点了我居然划了大半天水，浏览各种scheme相关的网站啥的，可不能这样啊呜。

今天要搞定HDMAPMDK-1378，也就是我们一直不想搞得在路口内部加上所谓的lane mark direction，可是路口中的道路都没有lane mark，谈何lane mark direction呢

害我好难受，经过反复，搞到了好几点

### 2020-06-16

今天来了之后一直在review，需要改的东西还挺多，然后我又开始了一点消极怠工的感觉，结果勉勉强强搞定了，然后宽哥又测出来好几个bug。

下午的时候得知潇哥要走了，我震惊了良久。

晚上的时候折腾了一下scheme，搞定了自定义的library的编译和引用。

### 2020-06-17

今天的主要工作就是上一个迭代的收尾工作，也就是bug修改。

### 2020-06-18

到今天为止，我们终于要把上一个迭代的事情做完了。

我整个人的感觉都非常的不好，原因在于做的事情的意义不明显，其实我觉得根本可以算是没什么意义。

那么，在这里我怎么定义意义呢？

目前的工作对我来说的意义就是，重要性从高到底

1. 提出问题的能力，能够发现有价值的有意义的问题
2. 积累对问题进行建模的能力，从而在以后能够解决更多的各种类型的问题
3. 对问题进行建模，从而使得通过一个一次性的努力而解决这个模型所描述的一类问题这样的方案成为可能。
4. 通过我的努力，能够解决具体的，有意义的问题，这之中一次性解决一个问题的意义不如付出一份努力来解决这一类的多个问题。
5. 保持愉悦，解决问题的成就感，问题本身的趣味性。
6. 与人的交流和关系
7. 薪资（这是一种保障，不是说它不重要，而是说其余部分应当建立与它之上）

可能还不包括我全部的工作动机，但这至少反映了一部分的事实。

而今天我之所以感到沮丧，我认为一个主要的原因是趣味性的丧失。首先我认为问题本身的意义对我来说不明显，这就使人损失掉了一点积极性。第二是对于这类问题的建模不够精确，导致解决问题的手段不能解决所有的问题（当然很少存在能够解决所有问题的模型，因为模型本身就是对问题的简化和抽象，我们这里讨论的是解决可接受范围内的问题）从而导致的反复，具体来说就是QA同学提出来的一个又一个的Bug,虽然其中有一些是因为对于需求理解不透彻或者根本就是测试自己的问题，但分析问题本身所花费的时间就占据了解决问题整个过程中最耗时的部分。

有时候对问题认识的不透彻会造成解决方案的不本质从而导致人会花费时间做无用功，基本上述意义中345点都得不到满足，从而会使得我变得沮丧。

然后还需要考虑的一点是，截止目前为止我都在解决上一个迭代应该解决的问题。还完全没有开展这个迭代所应该做的事情。这会使得这个迭代的时间被压缩，也许还会传递得影响后续的迭代。这是十分不应该发生的恶性循环，考虑到甚至更深远地影响人与人之间的的关系，我觉得甚至更加不应该了。

因此从明天起我应该在做一件事情之前先将他的各个方面都尝试考虑到，然后才去解决问题。

回头看了看这十几天做的事情，几乎工作的进展上在完全地原地踏步走，在刚来到北京的那个星期一也就是6月8号，我就提出`然后说一下工作，这段时间忙完了交付，主要是TLM(typed lane model)的重构，这次要明确目标，然后控制住自己，不要冲动地重构，要有策略的，有控制自己的进度的。`

目前看来我认为比较好的一点就是每天都有记录自己所做的事情，虽然有时候很简略，甚至是第二天补充的，但我认为持续地记录才是产生变革的种子。

另外补充一下之前看到的一句我认为非常非常有道理的话：

> 几年前，我在纽约买第一所房子的时候，一个房地产经纪人说得很有道理，"这房子得大修，而且是彻底大修，这所有65年历史的房子有绝对的升值潜力。现在你得把所有需要修的东西列个清单，而且在六个月内把一切弄好。一定要在六个月之内解决问题。"<br>"你疯了么？我付过定金、税金、律师费以后，已经没钱了。而且我是个很能自律的人，可以用五年的时间慢慢把一切修理好。"<br>她说，"不，你不会的，因为六个月以后，你就会习惯现在的状况。你会觉得一切都挺好。就算客厅里有具尸体，你也会若无其事地跨过去。"<br>我至今仍记得这些话。让我惊讶的是，一切都被她说中了。错的是我，六个月内没有清理的那些东西，在五年之后我卖房子的时候仍然没修。

这也太真实了，一定要警惕和小心。

### 2020-06-19

今天发生了一件很重要的事情，我和梁潇一起吃了一顿午饭。我需要好好整理一下。

### 2020-06-22

开始很消极，一直在分析bug，最后发现是子良的一个小问题，晚上9点下班了

### 2020-06-23

不可思议！现在是晚上19:00，我今天居然什么都没有干。

我的意思是我今天划了一天水，一直在网上浏览各种各样的网站，到了现在想起来干活，实在是有点心虚。想想原因，可能是因为周五发生的事情，也可能是因为后天就端午节假了，于是消极怠工- -但归根结底这样子做是不好的，即使决定要走，那也不能玩忽职守，也要在每一天认真对待工作，不是说夯时间，而是用心去解决问题。要走就更应该如此。

啊，现在我心里充满了愧疚。

最近要做的事情是TLM的重构，将数据结构拆分成超小型的layer数据结构，是一项很繁杂的工作。难道是不难，但是由于理念的不认同（我不认为拆分成超小型的数据结构是好的设计，拆分成小数据结构有一个好就是灵活容易改）

### 2020-06-24

假期前的最后一天，开始心安理得地划水，开展了一点应该做的重构工作。

### 2020-06-28

收假啦！

现在要摆正心态，以一个正确的心态面对工作；什么是正确的心态呢，下面我将尝试做一个定义。

周三晚上下大暴雨，在雨停后，我和Sophie学姐打了个电话，主题是我想要跑路了。

她一开始说不要着急，需要以一个非常长时间的时间跨度去看待自己的工作生涯，比如说一个人可能要工作到70岁才会退休（我强烈怀疑我会工作到更久）。因此做一切决定都要目光放长远，以十五年的跨度来看，十五年后我会成什么样子，我会希望自己成为什么样子，然后根据这个期望去做各种各样的决定。就我自己而言，我会希望40岁的自己成为梁潇这样的工程师，一个理智，冷静的人；一个架构师；一个学识渊博的人；依然密切关注并对当下的最新潮流胸有成竹；能看清潮流的本质，拆解出来那些不变的东西，从而去关注那些真正值得解决的问题，那些有价值，有难度的问题——例如软件的复杂度。

要想做到这样，就要不断学习，不断抱着谦虚的心态，**用实践检验真理**，其实所有的学习都是在用实践检验真理，首先我们遇到一个问题，然后去寻找解决问题的办法，解决问题的办法是什么呢，那些所谓的"真理"是解决问题的必要工具，而实践是检验真理的唯一标准，但事事践行成本太高了，我们必须接受一定的风险，去了解学习别人用实践检验真理的案例，这里面的风险在于：

1. 可能学到虚假的真理
2. 对问题的理解不深刻导致的教条主义

其中第二点比第一点更加危险，因为第一点是易于验证的，而第二点则是思想的偏差，这不是一个非黑即白的世界，因此不完全正确（即不能完全反应真理）的思想的危险性在于它部分正确，会使得人认为它具有普适性，从而用它去解决错误的问题。从而就产生了许多所谓的"银弹"，什么FP,什么OOP,什么TDD。对于"银弹"的追寻是不会停止的，当然也不该停止，但我们应当承认风险和收益并存。

回到和Sophie的话题，在冷静分析和决策的前提下，用长远的眼光去看待当下的自己需要什么；从而就有了优先级，这样综合起来去考虑也就容易了一些。接着她给出了一些实操上的建议，就是可以试图将自己从工作中抽离出来。不为之付出过多。

### 2020-06-29

今天照例早上划水（怎么就照例了？？？这样子下去是不行的！）

下午到了2点终于开始搞正事，其实是因为最近要做的事情我不太认同，就是所谓的TLM重构的事情。我这两年愈发地发现我需要一流的环境，否则成长是没有的。

因此就先按照specification完成当下的任务，再从其他的方面入手解决自己的问题吧。

### 2020-06-30

昨天下午心态崩溃了，焦虑涌上心头，开始变得非常难受，从下午四五点开始到七点我决定走，几乎什么都没有做出来，期间我一直觉得工作失去了意义，开启了自己的吐槽模式。就像星期天跟乔波讲的一样，公司也有问题，组里也有问题，公司的问题是两条腿走路的口号说的响亮但是却让人看不到希望，而组里的问题是Mentor的管理方式太过于独裁。我感觉自己就是一个工具人，凡是写代码都只能按照他的方式来写，按照他的设计来写，没有什么自主性；因此我会认为工作的意义好像失去了一样。再加上已经决定了要走，以及当前在做的事情（TLM重构）非常虚无，我就愈发地感到压力山大。

但是无论如何心态要放好，做好手头的事情，然后设好边界。

### 2020-07-01

和Mentor对了一下TLM重构的事情，还是较为麻烦，但是至少有一个方向了。可以按照这个方向去发展。

晚上和乔波在中关村走了两万步。

### 2020-07-02

今天下午1点到2点面了试，小伙子还不错，我觉得可以加一轮code面。

划水到4点

景仔帮我review了简历，有很多东西可以改，但是上班时间没有办法光明正大地改简历，所以我就得稍早一点下班，在回家后改；但是这样一来，我能够留给TLM的时间就不够多了，所以其实我不应该划水的，唉，尤其今天的划水可以说是社么都没干，就是在玩手机而已嘛！不可以这样下去了。

还剩下一个bug和TLM的后续工作。

### 2020-07-06

今天的工作就是继续TLM重构，说实话这项工作的工作量比我想象的大太多了。

我估计今天差不多能把parser搞定吧。

我准备把Sectioning搞定就进行一轮归纳汇总，抽象出一些trait

### 2020-07-07

### 2020-07-09

和林楠吃了饭，下午有面试

### 2020-07-10

今天和刘鸽吃了饭。

> 我相信大多数工程师（包括我本人）都有一定程度的自我能力否定倾向。很多时候，我们需要面对自身能力不足以应付的状况，却依旧要跨过眼前的障碍。在这种情况下，依靠他人的成果和"最佳实践"是更安全的。但是，我们很快就认为这些"最佳实践"是经过深思熟虑的，或肯定适用于我们的问题。当你启用更多服务时，云供应商会受益。微服务倡导者在你购买他们出的书时也会赚钱。他们俩都有动力向你兜售你本来用不到的技术。

### 2020-07-13

上周的某一天

### 2020-07-22

好久没有写日报了，我决定打破这个现状。

随着日子日渐过去，我的压力变得越来越大，同时面试和工作的事情丫的我几乎喘不过气来。