---
"title": "CZON Emblaカルーセルの調査とget-gcores-talk.tsの修正"
"summary": "このドキュメントは、CZONのEmblaカルーセルをブログに統合し、既存のスライダー実装を置き換えるためのガイドです。主なタスクは、Emblaの実装詳細の調査、get-gcores-talk.tsスクリプトの修正による平坦化されたMarkdown画像の出力、Emblaをサポートするためのテンプレートと静的リソースの更新、およびテスト検証を含みます。設計判断としてEmblaによる置き換え案を確認し、スクリプト修正からスタイル調整までの全工程を網羅した詳細設計案により、機能互換性とコードの統一性を確保します。"
"tags":
  - "Embla"
  - "カルーセル"
  - "ブログ開発"
  - "TypeScript"
  - "フロントエンド統合"
  - "テンプレート修正"
  - "静的リソース"
  - "互換性テスト"
"date": "2026-01-15"
---

# CZON Emblaカルーセルの調査とget-gcores-talk.tsの修正

## 目標

get-gcores-talk.tsを修正して平坦化されたMarkdown画像を出力し、CZONと一貫性のあるEmblaカルーセル実装を統合する

## 要点

- CZONにおけるEmblaカルーセルの実装詳細を調査する
- 現在のブログのテンプレート構造と既存のスライダー実装を分析する
- get-gcores-talk.tsの画像出力ロジックを修正し、slideshowマクロを複数のMarkdown画像行に変更する
- ブログテンプレートにEmblaライブラリの読み込みと初期化スクリプトを追加する
- Emblaに必要なCSSスタイルを追加する
- カルーセル機能をテストし、互換性を確保する

## 範囲

- /Users/c1/Work/blog/scripts/get-gcores-talk.ts
- /Users/c1/Work/blog/templates/
- /Users/c1/Work/blog/static/js/
- /Users/c1/Work/blog/static/css/

## フェーズ概要

1. **調査と分析** - 3タスク
2. **get-gcores-talk.tsの修正** - 1タスク
3. **ブログテンプレートへのEmbla統合** - 3タスク
4. **テストと検証** - 3タスク

---

 *作成日: 2026年1月15日 | 最終更新日: 2026年1月15日*

## 設計判断

> [REVIEW:blocking] 統合案の確認
> 既存のスライダー実装をEmblaで置き換え、カルーセル方式を統一する計画です。これには、`slideshow`ショートコードの出力をEmbla互換構造に修正し、Emblaスクリプトとスタイルを追加し、既存のスライダー用JavaScriptコードを削除することが含まれます。
> この案に同意するか、または他の案（例：共存）を希望するか確認してください。
>
> [RESPONSE] ユーザーは「続行」指示により統合案を確認済みです。既存スライダーをEmblaで置き換える案を実行します。
> [STATUS:resolved]

## 詳細設計案

### コアフロー
1. `get-gcores-talk.ts`の画像出力ロジックを修正: `slideshow`マクロを複数の独立したMarkdown画像行（各行が`![...](...)`）に変更する。
2. `templates/shortcodes/slideshow.html`を修正: Embla互換のHTML構造（`.embla`, `.embla__container`, `.embla__slide`）を出力し、スタイル互換性を保つために外側の`.slider-container`ラッパーを維持する。
3. `templates/head.html`にEmblaおよびEmbla AutoplayのCDNスクリプトタグを追加する。
4. `static/js/script.js`にEmbla初期化コードを追加（または新規スクリプトを作成）し、`.embla`コンテナを自動初期化し、既に初期化済みのコンテナはスキップする。
5. CZONのEmbla CSSスタイルを`static/css/style.css`に追加する、またはstyleタグで埋め込む。
6. `static/js/script.js`から既存のスライダー用JavaScriptコードを削除する（または無効化したまま保持する）。

### インターフェース定義
- Emblaコンテナ構造:
```html
<div class="slider-container">
  <div class="embla">
    <div class="embla__container">
      <div class="embla__slide"><img src="..." /></div>
      ...
    </div>
  </div>
</div>
```

### ファイル変更詳細
- `scripts/get-gcores-talk.ts`: 画像出力ロジックの修正
- `templates/shortcodes/slideshow.html`: Embla構造への書き換え
- `templates/head.html`: Emblaスクリプトタグの追加
- `static/js/script.js`: Embla初期化関数の追加、既存スライダーコードの削除
- `static/css/style.css`: Emblaスタイルの追加、既存スライダースタイルの調整

### 未確定事項
- 既存のスライダー用CSSスタイルは完全に書き直す必要があるか？ 外側の`.slider-container`のスタイルは維持し、内部のEmbla構造には新スタイルを使用することが可能。
- Emblaの自動グループ化ロジックが、他のページの画像に予期せぬ影響を与える可能性はあるか？ `.embla`クラスまたは特定のコンテナを含む画像グループのみを初期化することを確実にする必要がある。