---
"title": "2020年6月 業務日誌と振り返り"
"summary": "本稿は、著者による2020年6月の業務日誌です。コンパイラ起因の道路抽出問題や信号機取得バグの解決、データクリーニング、HDMAPMDKタスクのリファクタリングなど、日々の技術業務内容を詳細に記録しています。同時に、深い職業的省察も含まれています。著者は、納期直前での大規模リファクタリングのリスクを考察し、明確な目標と戦略の重要性を強調。仕事の意義について振り返り、具体的な問題解決よりも、価値ある問題を提起する能力やモデリング能力の蓄積が重要であると述べています。内向的な性格がコミュニケーションに与える影響を分析し、積極的に教えを請うよう自らを励ましました。王垠のブログを読んだり他者と議論したりする中で、OOPやFPといったプログラミングパラダイムへの「銀の弾丸」的思考を批判し、実践による検証を主張。上海から北京への転勤による不適応感、職場環境やマネジメント手法への見解も記録。最後に、退職を考慮する背景の中で、長期的視点でキャリアを計画し、不安に対処するための心構えを調整する方法について論じています。"
"tags":
  - "業務日誌"
  - "技術的振り返り"
  - "キャリア開発"
  - "ソフトウェア工学"
  - "プログラミングパラダイム"
  - "マインドセット調整"
  - "リファクタリング"
"date": "2020-06-01"
---

### 2020-06-01
今朝出社してすぐに逸銘さんのところへ問題分析に行き、午前中ずっと分析していました。結果は、以前から知られていた問題（旧版コンパイラの補間による点の欠落）が引き起こした別の問題でした：道路抽出時にちょうど欠落した線分の近くに来てしまい、lane offsetが負の値になってしまうというものです。

結局、午後4時近くまでかかってしまい、非効率で苦痛な徹夜の後（今の状態では徹夜すると、ほぼ必ず非効率になると感じています）、作業を終えました。

### 2020-06-02
午後から出社し、镱銘さんの車載テストのためにいくつかのバグを解決し、逸銘さんの夜の車載テストに間に合わせました。

### 2020-06-03
朝一で逸銘さんのところへ行き、昨夜発見された問題、つまり信号機が取得できない問題を解決しました。

### 2020-06-04
今朝やるべきことは三つ：
1. データのクリーニングを行い、最終的な0605のデータをアップロードする。
2. 幅異常問題の確認 - 該当位置に車線がないことが原因。
3. 補間点が誤った車線に割り当てられる問題の確認。
4. 再確認。

### 2020-06-05
緊張と刺激に満ちた一日でした。HDMAPMDK-1347とHDMAPMDK-1352を完了し、大きなリファクタリングも行いました。

貴重な教訓を得ました：納期直前には、超大規模な変更をしてはいけません。十分なQAテストがない状況では、どんなに優れたリファクタリングでもリスクをもたらす可能性があります。同時に、設計レビューに十分な時間を割けない場合（これは自分自身について言っています。書いている途中で設計が間違っていることに気づくことがありますが、実装段階で設計の問題に気づくのはまた別の問題、つまり着手が早すぎるということです）、危険です。

月曜日追記：
この緊張感あふれるリファクタリングの日、私はほとんど休む間もなく、考える暇もなく、ただ慣れとフロー状態に頼り、非常に高い効率でコードを書いていました。もし「納期前の大規模リファクタリングはすべきでない」という原則を考慮しなければ、実はこの状態を非常に楽しんでいました。しかし、何事にも目標と意義が必要です。自分が楽しむことだけに夢中になってはいけません。そうでなければ、その楽しみは低次元の趣味になってしまいます。

### 2020-06-08
土曜日に北京に引っ越して仕事を始めました。

北京に戻って仕事をする感覚は、なかなか慣れないものです。すべてが変わりました。まず、自分のデスクがありません（秀赟さんがインターンを採用し、仕事の都合上、そのインターンが座ることになりました）。これは、すべての喪失感の中で最も適応しにくいものです。高校2年生の時に1組に来て新しい席に座り、誰も知り合いがおらず、話したくもなかったあの時のようです。ここの人々は見慣れているようでいて、どこか他人のようです。ここでは友達が少ないように感じますが、これは理性的に判断すれば錯覚です。しかし、人と交流したくない、隅っこにいたいという気持ちは本当です。そして実際に、瑀璋さんの隣の隅っこを見つけて座りました。なぜ人と交流したくないのでしょうか？この問題はまだ理解できません。もしかすると、正当な理由がないから？なぜ北京に来たのか、どれくらい滞在するのかと聞かれると、私は曖昧に「しばらく、一、二ヶ月くらい」と答えます。あるいは、本質的に自分は内向的で、面倒をかけたくなく、他人の目に自分が愚かに映っていないか特に気にする人間だということの表れかもしれません。しかし、書き進めれば進めるほど、後者の要素がより多く、かつ不必要であると感じます。第一に、愚かに見えることは、本当に愚かであるよりも良いです。真剣に他人に教えを請い、たとえ不器用であっても構いません。恐れないで。若いうちは恐れないで。いつだって恐れないで。All is well.

次に仕事について。この期間は納品が一段落し、主にTLM（typed lane model）のリファクタリングに取り組みました。今回は目標を明確にし、自分をコントロールして、衝動的にリファクタリングせず、戦略的に、自分の進捗を管理する必要があります。

また、デスクトップPCをうまくセットアップしました。以前ずっとネットに接続できなかったのは、パスワードを変更した後、ある停電をきっかけにネットワーク接続が完全に失われていたからでした。そこで、マシンのセットアップも行いました。今回の目標は優先順位として：
1. 生産性
2. クールさ
3. 見た目の良さ

今日は王垠のブログを長い間読んでいました。解毒中です。私は以前、狂信的な宗教者のように、物事の本質を見ることができませんでした。何かがすべての問題を解決する究極の手段だと思い込んでしまうことがよくありました。しかし、実際にはそのような「究極の手段」はほとんど存在せず、ほとんどの場合、それは単なる宗教的熱狂に過ぎません。例えば：
- Vim vs Emacs
- OOP vs FP
- Go vs Rust

などなど…。私は以前OOPに初めて触れた時、OOPは無敵で、すべての問題を解決できると思い込みました。しかし結局、巨大なGodクラスを書くだけに終わり、実際にはそのクラスがなくても構わず、本当に有用なのはそのクラスに属する一つ一つの関数でした。その後（ここ2年）、FPに触れ、FPがすべての問題を解決する銀の弾丸だと思い込みました。しかし、Scalaでしばらくプログラムを書いてみると、生産性が向上するどころか、文法やImmutabilityにこだわるあまり、かえって効率が低下していることに気づきました。

### 2020-06-09
少し調子が出てきました。Archをインストールし、使い心地はMacよりも快適かもしれません？

瑀璋さんとHearthstoneのバトルグラウンドをしばらく遊びました。

### 2020-06-10
今日は以下のことを計画しています：
1. HDMAPMDK-1199 RoadMarkをサブクラス化し、より豊富な情報を提供する。
2. HDMAPMDK-892 経験軌跡を提供する。

もし余力があれば、リリース用のドキュメントを整えます。

結果、892を完了しました。

### 2020-06-11
HDMAPMDK-892（経験軌跡の提供）をレビューしました。

MDKがまだ対応していないことが判明したので、今日の午後はその対応作業を行いました。

対応が完了し、とても疲れました。

自分のArchの環境構築を続け、いくつかの手順を記録して自動化の一部にしようと試みています。

### 2020-06-12
今日のタスクはHDMAPMDK-1199を完了させることです。以前、この問題を忘れていました。

結果、ようやく20時に完了させることができました。

### 2020-06-13
非常にのんびりした一日でした。テスト提出後はずっと自分の自動化スクリプトをいじっていました。

最初はシェルで書こうと思いましたが、シェルがあまり好きではないので、Schemeの環境構築を始めました。とても気持ちがいいです。

### 2020-06-15
うわ、もう15時なのに、半日以上もダラダラしてしまいました。様々なScheme関連のサイトを閲覧したりしていました。こんなことではいけませんね。

今日はHDMAPMDK-1378を完了させなければなりません。これは、交差点内部にいわゆるlane mark directionを追加する、ずっとやりたくなかった作業です。しかし、交差点内の道路にはlane markがないのに、lane mark directionなどあるのでしょうか。

とても悩まされ、何度もやり直し、深夜までかかってしまいました。

### 2020-06-16
今日出社してからずっとレビューをしていました。修正が必要な箇所がかなりあり、また少しサボり気分になってしまいました。結果、なんとか完了させ、その後、宽哥がさらにいくつかのバグを検出しました。

午後、瀟哥が辞めることを知り、長い間ショックを受けていました。

夜はSchemeをいじり、カスタムライブラリのコンパイルと参照を設定しました。

### 2020-06-17
今日の主な仕事は、前回のイテレーションの締めくくり作業、つまりバグ修正です。

### 2020-06-18
今日までで、ようやく前回のイテレーションの作業を終えようとしています。

私の気分は全く良くありません。理由は、やっていることの意義が明確でないからです。実際、ほとんど意味がないと言っても過言ではないと思います。

では、ここで私が「意義」をどう定義するのでしょうか？

現在の仕事に対する私の意義は、重要性の高い順に以下の通りです：

1. 問題提起能力：価値と意義のある問題を発見できること。
2. 問題をモデル化する能力の蓄積：将来、より多様な種類の問題を解決できるようになるため。
3. 問題をモデル化すること：一度の努力で、そのモデルが記述する一連の問題を解決するような解決策を可能にすること。
4. 自分の努力によって、具体的で意義のある問題を解決できること。この中で、一つの問題を一度に解決することよりも、一つの努力で一連の複数の問題を解決することの方が意義がある。
5. 楽しさを保つこと：問題解決の達成感、問題自体の面白さ。
6. 人との交流と関係。
7. 給与（これは保証です。重要でないという意味ではなく、他の部分はこれの上に築かれるべきだということです）。

これが私の仕事の動機の全てを網羅しているわけではありませんが、少なくとも事実の一部を反映しています。

そして今日、私が落ち込んでいる主な理由は、面白さの喪失だと思います。まず、問題自体の意義が私にとって明確でないため、やる気が少し損なわれます。第二に、この種の問題に対するモデル化が十分に正確でないため、解決手段がすべての問題を解決できないこと（もちろん、すべての問題を解決できるモデルはほとんど存在しません。モデル自体が問題の簡略化と抽象化だからです。ここでは許容範囲内の問題を解決できるかどうかを議論しています）による繰り返し作業、具体的にはQA担当者から次々と提出されるバグです。その中には、要求理解が不十分なものや、テスト自体の問題もありますが、問題分析そのものに費やす時間が、問題解決の全プロセスの中で最も時間を消費する部分を占めています。

時には、問題認識が不十分であるために、本質的でない解決策を生み出し、無駄な努力に時間を費やすことになります。基本的に、上記の意義の3、4、5点が満たされず、それが私を落ち込ませることになります。

さらに考慮すべき点は、これまでのところ、私は前回のイテレーションで解決すべき問題を処理してきただけで、今イテレーションでやるべきことには全く手を付けていないことです。これでは今イテレーションの時間が圧迫され、おそらく後続のイテレーションにも悪影響を及ぼすでしょう。これは非常に避けるべき悪循環です。さらに深く、人と人の関係にまで影響を及ぼす可能性を考えると、ますます避けるべきだと思います。

したがって、明日からは、何かをする前に、そのあらゆる側面を考慮しようと試み、それから問題解決に取り組むべきです。

ここ十数日間の作業を振り返ってみると、仕事の進捗は完全に足踏み状態です。北京に来たばかりの月曜日、つまり6月8日に、私は「次に仕事について。この期間は納品が一段落し、主にTLM（typed lane model）のリファクタリングに取り組みました。今回は目標を明確にし、自分をコントロールして、衝動的にリファクタリングせず、戦略的に、自分の進捗を管理する必要があります。」と述べました。

現時点で良いと思う点は、毎日自分のしたことを記録していることです。時には簡潔だったり、翌日に追記したりしますが、継続的な記録こそが変革の種を生むと信じています。

また、以前見て非常に道理にかなっていると思った言葉を補足します：

> 数年前、私がニューヨークで最初の家を買った時、ある不動産ブローカーがとても的を射たことを言いました。「この家は大規模な修理、それも徹底的な修理が必要です。この65年もの歴史を持つ家には絶対的な価値上昇の可能性があります。今、あなたは修理が必要なもの全てのリストを作成し、6ヶ月以内にすべてを片付けなければなりません。必ず6ヶ月以内に問題を解決してください。」<br>「あなたは正気ですか？頭金、税金、弁護士費用を支払った後、もうお金はありません。それに私は自制心が強い方で、5年かけてゆっくりすべてを修理できます。」<br>彼女は言いました。「いいえ、あなたはそうしません。なぜなら6ヶ月後には、あなたは今の状況に慣れてしまうからです。すべてがまあまあ良いと思うようになるでしょう。たとえリビングルームに死体があっても、平然とまたいで通るようになります。」<br>私は今でもこの言葉を覚えています。驚くべきことに、すべて彼女の言う通りになりました。間違っていたのは私で、6ヶ月以内に片付けなかったものは、5年後に家を売る時になってもまだ修理されていませんでした。」

これはあまりにも真実です。警戒し、注意しなければなりません。

### 2020-06-19
今日はとても重要なことが起こりました。梁瀟さんと一緒に昼食を食べました。しっかり整理する必要があります。

### 2020-06-22
非常に消極的に始まり、ずっとバグを分析していました。最後に、子良さんの小さな問題であることが判明し、21時に退社しました。

### 2020-06-23
信じられません！今は夜の19:00ですが、今日は何もしていません。

つまり、今日は一日中ダラダラして、ネットで様々なサイトを閲覧し、今になって仕事を思い出し、かなり後ろめたい気持ちです。原因を考えてみると、金曜日に起こったことのせいかもしれませんし、明後日が端午節の連休だからかもしれません。しかし、根本的にはこのようなことをするのは良くありません。たとえ辞めると決めたとしても、職務を怠ってはいけません。毎日仕事に真剣に向き合い、時間を費やすだけでなく、心を込めて問題を解決するべきです。辞めるならなおさらです。

ああ、今、私の心は後悔でいっぱいです。

最近やるべきことはTLMのリファクタリングで、データ構造を超小型のレイヤーデータ構造に分割する、とても煩雑な作業です。難しくはないのですが、理念に共感できないからです（超小型のデータ構造に分割することが良い設計だとは思いません。小さなデータ構造に分割する利点は、柔軟で変更しやすいことです）。

### 2020-06-24
連休前の最終日、少し気が楽になり、ダラダラし始め、やるべきリファクタリング作業に少し手を付けました。

### 2020-06-28
連休明けです！

今、心構えを正し、正しい心構えで仕事に臨む必要があります。正しい心構えとは何か、以下で定義を試みます。

水曜日の夜は大雨で、雨が止んだ後、Sophie先輩と電話をしました。テーマは「辞めたい」ということです。

彼女は最初、焦らないように、非常に長い時間軸で自分のキャリアを見る必要があると言いました。例えば、人は70歳まで働くかもしれません（私はもっと長く働くことを強く疑っています）。したがって、すべての決定は長期的な視点で、15年後の自分がどうなっているか、どうなりたいかを考え、その期待に基づいて様々な決定を下すべきです。私自身に関して言えば、40歳の自分が梁瀟さんのようなエンジニア、理性的で冷静な人、アーキテクト、博識な人、依然として最新の潮流に細心の注意を払い、それらを理解している人、潮流の本質を見抜き、変わらないものを分解し、真に解決する価値のある問題、例えばソフトウェアの複雑さといった、価値と難易度のある問題に注目できる人になっていることを望みます。

そのためには、絶えず学び、謙虚な姿勢を持ち続け、**実践によって真理を検証する**必要があります。実は、すべての学びは実践による真理の検証です。まず問題に遭遇し、次に解決策を探します。解決策とは何でしょうか？いわゆる「真理」は問題解決の必要なツールであり、実践は真理を検証する唯一の基準です。しかし、すべてを実践で検証するにはコストが高すぎるので、ある程度のリスクを受け入れ、他人が実践で真理を検証した事例を学び、理解する必要があります。ここでのリスクは：

1. 偽りの真理を学ぶ可能性。
2. 問題理解が浅いために生じる教条主義。

このうち、2番目は1番目よりも危険です。なぜなら、1番目は検証しやすいですが、2番目は思考の偏りであり、これは白か黒かの世界ではないからです。したがって、完全に正しくない（つまり真理を完全に反映していない）思想の危険性は、部分的に正しいため、人がそれを普遍的だと思い込み、間違った問題を解決するために使ってしまうことです。それによって、いわゆる「銀の弾丸」、何でもFP、何でもOOP、何でもTDDといったものが生まれます。「銀の弾丸」への探求は止むことはなく、もちろん止めるべきでもありませんが、リスクと利益が共存することを認めるべきです。

Sophieとの話題に戻ると、冷静な分析と意思決定の前提で、長期的な視点で現在の自分に何が必要かを考えることです。そうすれば優先順位が生まれ、総合的に考慮することが少し容易になります。その後、彼女は実践的なアドバイスをいくつかくれました。それは、自分を仕事から引き離そうと試みること、過度に没頭しないことです。

### 2020-06-29
今日もいつものように午前中はダラダラ（どうしていつものように？？？このままではいけません！）。

午後2時になってようやく本題に取り掛かり始めました。実は、最近やるべきこと（いわゆるTLMリファクタリング）にあまり共感できないからです。ここ2年、私は一流の環境が必要だとますます感じるようになりました。そうでなければ成長はありません。

したがって、まずは仕様書に従って現在のタスクを完了し、その後、他の方面から自分の問題を解決していくことにします。

### 2020-06-30
昨日の午後、気持ちが崩れてしまい、不安が押し寄せ、とても辛くなりました。午後4、5時から7時に辞めると決めるまで、ほとんど何もできませんでした。その間、仕事が意味を失ったと感じ、独り言モードに入っていました。日曜日に喬波さんに話したように、会社にも問題があり、チームにも問題があります。会社の問題は、「二本足で歩く」というスローガンは立派ですが、希望が見えないことです。チームの問題は、メンターのマネジメントスタイルが独裁的すぎることです。私は自分が単なるツールのように感じます。コードを書くときはいつも彼のやり方で、彼の設計で書かなければならず、自主性がほとんどありません。そのため、仕事の意義が失われたように感じます。さらに、すでに辞めると決めていること、そして現在取り組んでいること（TLMリファクタリング）が非常に空虚であることから、ますますプレッシャーを感じています。

しかし、どんなことがあっても心構えを整え、目の前のことをきちんとやり、境界線を設ける必要があります。

### 2020-07-01
メンターとTLMリファクタリングについて話し合いました。まだかなり面倒ですが、少なくとも方向性は見えました。この方向に沿って進めていけます。

夜、喬波さんと中関村で2万歩歩きました。

### 2020-07-02
今日の午後1時から2時まで面接をしました。若者なかなか良かったです。コード面接を追加しても良いと思います。

16時までダラダラ。

景仔さんが私の履歴書をレビューしてくれました。修正点がたくさんありますが、勤務時間中は堂々と履歴書を修正できないので、少し早めに退社し、家に帰ってから修正しなければなりません。そうすると、TLMに割ける時間が十分ではなくなってしまいます。だから、実はダラダラすべきではなかったのです。特に今日のダラダラは、ただスマホをいじっていただけです！このままではいけません。

残っているのは、バグ一つとTLMの後続作業です。

### 2020-07-06
今日の仕事はTLMリファクタリングの続きです。正直なところ、この作業の作業量は想像以上に膨大です。

今日中にパーサーをなんとか完成させられると思います。

Sectioningを完了したら、一度まとめて、いくつかのtraitを抽象化しようと思っています。

### 2020-07-07

### 2020-07-09
林楠さんと食事をし、午後は面接があります。

### 2020-07-10
今日は劉鴿さんと食事をしました。

> 私は、大多数のエンジニア（私自身も含む）が、ある程度の自己能力否定傾向を持っていると信じています。多くの場合、私たちは自身の能力では対応できない状況に直面しながらも、目の前の障害を乗り越えなければなりません。このような状況では、他人の成果や「ベストプラクティス」に頼る方が安全です。しかし、私たちはすぐに、これらの「ベストプラクティス」が十分に考え抜かれたものである、あるいは私たちの問題に確実に適用できると思い込んでしまいます。クラウドベンダーは、あなたがより多くのサービスを有効にすると利益を得ます。マイクロサービス推進者は、あなたが彼らの本を買うとお金を稼ぎます。彼ら両方には、あなたが本来必要としない技術を売り込む動機があります。

### 2020-07-13
先週のとある日。

### 2020-07-22
久しぶりに日報を書いていませんでした。この状況を打破しようと決めました。

日が経つにつれて、私のプレッシャーはますます大きくなり、同時に面接と仕事のことで、もう息もつけないほどです。