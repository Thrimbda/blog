---
"title": "Zola 博客实时编辑与后端方案设计"
"summary": "本文档是一份关于为 Zola 博客实现 WYSIWYG Markdown 实时编辑功能并结合 Supabase 或 GitHub
  后端方案的设计任务清单。文档首先进行了现状审计与约束分析，明确了技术约束和实时编辑的定义。接着，通过编辑器选型调研，推荐了适合的编辑器并制定了主题适配策略\
  。然后，设计了 Supabase 和 GitHub 两套后端方案的数据模型、权限和同步路径。最后，给出了整合方案的详细设计、落地计划以及 MVP 和 v2
  增强项的范围。核心目标是实现一个无需手工后端、风格一致且功能完善的博客编辑管理界面。"
"tags":
  - "Zola"
  - "WYSIWYG"
  - "Markdown"
  - "Supabase"
  - "GitHub"
  - "实时编辑"
  - "博客"
  - "任务清单"
"date": "2026-01-06"
---

# Zola 博客：WYSIWYG Markdown 实时编辑 + Supabase/GitHub 后端方案设计 - 任务清单

## 快速恢复

**当前阶段**: 已完成（待 review）
**当前任务**: 等待你 review：确认编辑范围/实时含义/发布链路/鉴权/图片策略（见 `plan.md`）
**进度**: 8/8 任务完成（设计文档已就绪）

---

## 阶段 1: 现状审计与约束 ✅ COMPLETE

- [x] 审计现有主题/CSS 变量、模板结构、JS 依赖与部署方式，明确必须保持的设计语言与技术约束。 | 验收: 在 `context.md` 记录现有架构、CSS token/变量、可复用组件/页面入口与不宜破坏的点。
- [x] 明确“实时编辑”的含义（实时预览/自动保存/多人协作）并列出需要你 review 的问题。 | 验收: 在 `plan.md` 中列出未决问题与默认假设。

---

## 阶段 2: 编辑器选型调研 ✅ COMPLETE

- [x] 上网调研可嵌入的 WYSIWYG Markdown editor（偏向无构建/纯 JS 方案 + React 方案各 1-2 个），对比功能、体积、定制/主题能力、图片上传钩子、license 与集成复杂度。 | 验收: 在 `context.md` 写出对比表与推荐候选（含链接），并标注需要验证/不确定点。
- [x] 给出与现有 suCSS+CSS变量风格一致的 UI/主题适配策略（不引入或最小化引入新的 design system）。 | 验收: 在 `plan.md` 给出主题适配策略与关键实现点（CSS 变量映射、暗黑模式、按钮/表单风格）。

---

## 阶段 3: 后端与数据模型设计 ✅ COMPLETE

- [x] 设计 Supabase 方案：Auth、RLS、表结构、对象存储(图片)与前端直连方式；同时给出 GitHub Issue/Discussion 方案：鉴权、权限、写入与同步策略。 | 验收: 在 `context.md` 写出两套方案的数据流、权限模型、威胁点与取舍建议。
- [x] 定义从“编辑结果”到“站点内容”的发布/同步路径（不写手工后端）：例如 GitHub Actions 同步、客户端提交 PR、或仅做草稿库。 | 验收: 在 `plan.md` 明确推荐路径、备选路径与各自的操作流程。

---

## 阶段 4: 整合方案详细设计与落地计划 ✅ COMPLETE

- [x] 输出最终推荐的端到端设计：页面入口(`/admin`)、路由/权限、编辑器配置、保存/发布流程、失败恢复、版本历史(可选)。 | 验收: `plan.md` 中给出可执行的分步落地计划（文件/目录级别），并标出需要你 review 的关键决策点。
- [x] 列出最小可用(MVP)范围与后续增强（图片管理、草稿/发布、回滚、多人协作等）。 | 验收: 在 `tasks.md` 以 checklist 形式给出 MVP 与 v2 增强。

---

## 发现的新任务

(暂无)

---

## MVP（建议范围）

- [ ] `/admin` 页面：复用 `reset.css`/`suCSS.css`/`style.css`，并接入现有 light/dark toggle（保持风格一致）。
- [ ] Supabase：创建 `documents` 表 + RLS（单用户 allowlist）。
- [ ] 编辑器：集成 Vditor（优先 IR/源码模式兜底），实现“打开→编辑→自动保存（debounce）”。
- [ ] Front matter 保护：前端将 front matter 与正文拆分存储/编辑（避免 WYSIWYG 改写）。
- [ ] 发布按钮：写入 `published_at`（或 boolean）用于区分“草稿/已发布”。
- [ ] GitHub Actions：从 Supabase 拉取 `published` 文档，同步写入 `content/**` 并提交到 `master`，触发站点部署。
- [ ] 冲突策略：默认 Supabase 为真源；若检测到 repo 手工改动则 fail-fast 并提示人工处理。

## v2（增强项）

- [ ] 图片上传：对接 Supabase Storage（拖拽/粘贴上传），自动插入外链 Markdown。
- [ ] 版本历史：`document_revisions` 表（差异/回滚），或在 Git commit 中保留回滚点。
- [ ] 本地预览一致性：在 `/admin` 中提供“按 Zola 渲染规则的预览”提示（至少：代码高亮、mermaid、短代码原样展示）。
- [ ] 多文档管理：按 `content/**` 树形浏览/搜索/标签。
- [ ] 权限增强：多用户（协作者）与审计日志。
- [ ] 发布流程增强：生成 PR 而非直接 push，方便 review。

---

*最后更新: 2026-01-06 20:33*
