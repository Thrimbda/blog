---
"title": "Neues Blog herumgebastelt: Ich habe meine Gcores-Talks ins Blog verlegt"
"summary": "Dieser Artikel beschreibt detailliert den technischen Prozess, wie der Autor Inhalte von seinen Gcores-Talks in sein persönliches Blog migriert hat. Ausgehend von einem alten Blog, das aufgrund veralteter Abhängigkeiten nicht mehr funktionierte, erklärt der Autor die Wahl von Zola als neuen Blog-Generator. Der Schwerpunkt liegt auf dem Abrufen der Talk-Daten über eine API, deren Verarbeitung in Markdown-Format und der Implementierung einer interaktiven Bildergalerie mit HTML, CSS und JavaScript. Der Autor betont die Freude an der schnellen Feedback-Schleife in der Frontend-Entwicklung und teilt seine RxJS-Implementierung für Touch-Interaktionen. Abschließend resümiert er die Zufriedenheit, die volle Kontrolle über sein Blog zu haben, und die reine Freude am Programmieren, auch wenn der Inhalt eher oberflächlich ist, der Prozess jedoch erfüllend war."
"tags":
  - "Blog"
  - "Technik"
  - "Frontend-Entwicklung"
  - "Daten-Scraping"
  - "Zola"
  - "Gcores"
  - "RxJS"
  - "Markdown"
"date": "2024-06-18"
---

**Dieser Artikel entstand aus meiner unsterblichen kindlichen Neugier.**

Im April, während einer Reise, hatte ich diesen starken Drang, einen Reisebericht zu schreiben, den ich zuerst auf Gcores veröffentlichte. Wie üblich wollte ich dann eine Markdown-Version in meinem eigenen Blog veröffentlichen.

Nachdem ich fertig war, stellte ich fest, dass mein Blog kaputt war.

## Das alte Blog

Die Welle, persönliche Blogs zu erstellen, schwappte in meinem dritten Studienjahr über unsere Fakultät. Vor 7 Jahren beschrieb [dieser](czon://5221db5c2766ca0baade64eb4959a1c4fb1596bf1294c20de8af0c1448781374) mir heute peinliche Artikel meine anfänglichen Gedanken beim Aufbau dieses Blogs.

Die Gründe waren: Erstens wollte ich mich dazu anhalten, etwas zu schreiben; zweitens wollte ich etwas praktische Ingenieursarbeit machen und dabei einige schicke, neue Technologien verwenden, die an der Uni nicht gelehrt werden; und außerdem ist es einfach cool, eine eigene Domain zu haben, zumindest fand ich das.

Lassen Sie uns die damalige Szene nachspielen:

---

Nachdem ich etwas Neues gelernt hatte, notierte ich aufgeregt meine Ideen in einem Markdown-Dokument.

Nach dem Schreiben führte ich lässig ein paar Befehle aus, um den neuen Blog hochzuladen:

```shell
$ git add .
$ git commit -m "new blog! hahahaha"
$ git push origin master
```

Dann öffnete ich aufgeregt die CI-Oberfläche – CI war damals noch ziemlich modern, die DevOps-Idee war erst seit ein paar Jahren im Umlauf. Auf der Log-Seite der CI wartete ich darauf, dass der gesamte Blog, einschließlich dieses Artikels, zu einer statischen HTML-Website gebaut wurde, dass Travis die Build-Artefakte mit meinem Schlüssel in das Git-Repository pushte und dass Github die Artefakte veröffentlichte.

Schließlich ging ich auf meine Domain [https://blog.thrimbda.com](https://blog.thrimbda.com) und sah zufrieden den neuen Artikel ganz oben auf der Seite.

---

Im Laufe der Jahre wurde dieser Prozess langweilig, langweilig und weiterhin funktional, bis der Tag kam, an dem er versagte.

## Das neue Blog

An jenem Tag Ende April versagten drei aufeinanderfolgende CI-Pipelines. Ein kurzer Blick in die Logs zeigte, dass eine Build-Abhängigkeit aufgrund ihres Alters aus dem Internet verschwunden zu sein schien. Mir wurde klar, dass 7 Jahre in dieser Branche eine enorme Zeitspanne sind – lang genug, um Burgen zu zerstören und Berge zu verschlingen.

Also nutzte ich die Leerlaufzeiten bei der Arbeit, um mit einigen nicht allzu spannenden Anforderungen eine Technologieauswahl zu treffen: **Einfach genug, bequem genug.**

So entstand dieses neue Blog, und wie üblich muss es vorgestellt werden:

-   Ich wählte [Zola](https://www.getzola.org/) als Generator;
-   Ich suchte ein sehr einfaches, aber hübsches [Theme](https://github.com/Speyll/anemone) aus;

Als Ersatz für das alte Blog war dieses neue Blog damit fertig.

## Der kindlich-neugierige Bastelprozess

Vielleicht weil es neu genug war, oder weil die Technologieauswahl einfach genug war, vielleicht weil die Feedback-Schleife in der Frontend-Arbeit kurz genug ist, und weil die Arbeit mit Azheng unweigerlich etwas Frontend-Wissen vermittelt und meine Wissenslücken aus dem ersten Studienjahr schließt, wurde das Herumbasteln am Blog wieder Spaß.

Einige bescheidene CSS-Anpassungen, ein neues gitcus, das die Kommentare auf Github hostet; ich war mit meinem Ich von vor sieben Jahren einer Meinung: Programmieren und an Projekten basteln macht wirklich Spaß, es ist die Freude an der Arbeit, die Freude am Spiel.

Ich möchte die Restwärme dieser Freude nutzen, um den (selbstverliebten) technischen Prozess der Migration meiner Gcores-Talks ins Blog zu beschreiben.

<!--more-->

---

### Daten

Bei einer früheren Erkundung hatte ich bereits festgestellt, dass Gcores Crawlern gegenüber äußerst freundlich ist – seine Daten-APIs sind einheitlich und ausdrucksstark. Zum Beispiel bei der Erkundung meiner Talks:

![gcores-api-at-glance](https://0xc1.space/images/2024/06/18/gcores-api-at-glance.jpg)

Diese API wird für die Abfrage der Talk-Daten verwendet:

```
https://www.gcores.com/gapi/v1/users/464460/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&before=1718720726.986&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege
```

#### Rohdaten

Lassen Sie uns die Informationen extrahieren:

```ts
const user = 464460;

const url = new URL(
  `https://www.gcores.com/gapi/v1/users/${user}/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege`
);
```

Bei genauerer Betrachtung scheint die Paginierung durch den Parameter `before` bestimmt zu sein. Indem man diesen Zeitstempel kontinuierlich nach vorne iteriert, bis keine Daten mehr zurückkommen, erhalten wir folgenden Code:

```ts
import {
  EMPTY,
  Observable,
  expand,
  map,
  mergeAll,
  mergeMap,
  of,
  shareReplay,
  skip,
  takeWhile,
  tap,
  toArray,
} from "https://esm.sh/rxjs@7.8.1";

const user = 464460;

const url = new URL(
  `https://www.gcores.com/gapi/v1/users/${user}/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege`
);

const imageUrl = (image: string) =>
  `https://image.gcores.com/${image}?x-oss-process=image/quality,q_90/format,webp`;

// Paginierung
url.searchParams.set("before", `${Date.now() / 1000}`);

interface IGcoresTalk {
  text: string;
  images: string[];
  published_at: number;
  tags: string[];
}

const rawGcoresTalkData$: Observable<any[]> = of({
  before: Date.now() / 1000,
}).pipe(
  // Rohdaten
  expand(async ({ before }) => {
    url.searchParams.set("before", `${before}`);
    const res = await fetch(url);
    const data = await res.json();
    if (!data.data || data.data.length === 0) {
      return EMPTY;
    }
    return {
      before:
        new Date(
          data.data[data.data.length - 1].attributes["published-at"]
        ).getTime() / 1000,
      ...data,
    };
  }),
  skip(1),
  // Debug
  // take(1),
  takeWhile((v) => !!v.data),
  // filter((v) => v.data.length > 0),
  tap((v) => {
    console.info(v);
  }),
  toArray(),
  shareReplay(1)
);
```

So erhalten wir einen Rx-Stream, der alle Rohdaten der Talks eines Users trägt.

#### Datenverarbeitung

Mit den Rohdaten müssen wir sie nun in Markdown verarbeiten. Fangen wir direkt an. Die Hauptpunkte sind:

-   Entscheiden, welche Inhalte angezeigt werden sollen
-   Verstehen der API-Felder von Gcores

Talks sind ähnlich wie Freundeskreise oder Microblogs – Text mit Bildern und einigen Tags. Lassen Sie sie uns einfach flach anzeigen.

Die Daten eines Talks können wie folgt definiert werden:

```json
{
  "blocks": [
    {
      "data": { "spoiler": false },
      "depth": 0,
      "entityRanges": [{ "key": 0, "length": 1, "offset": 0 }],
      "inlineStyleRanges": [],
      "key": "7u4tf",
      "text": "-",
      "type": "atomic"
    },
    {
      "data": { "spoiler": false },
      "depth": 0,
      "entityRanges": [],
      "inlineStyleRanges": [],
      "key": "wisz4",
      "text": "核聚变好玩，和雨川西蒙合了影，见到了做志愿者的 merz，然而社恐差点没敢上前搭话，腿快走断了，给没能来的小朋友们买了点纪念品，Celeste