---
"title": "Zola ブログ：リアルタイム編集とバックエンドソリューション設計"
"summary": "このドキュメントは、Zola ブログにWYSIWYG Markdownリアルタイム編集機能を実装し、SupabaseまたはGitHubバックエンドソリューションを組み合わせるための設計タスクリストです。まず現状の監査と制約分析を行い、技術的制約とリアルタイム編集の定義を明確にします。次に、エディター選定の調査を通じて適切なエディターを推奨し、テーマ適応戦略を策定します。その後、SupabaseとGitHubの2つのバックエンドソリューションのデータモデル、権限、同期パスを設計します。最後に、統合ソリューションの詳細設計、実装計画、およびMVPとv2拡張項目の範囲を示します。中核的な目標は、手動バックエンドを必要とせず、スタイルが一貫しており、機能が充実したブログ編集管理インターフェースを実現することです。"
"tags":
  - "Zola"
  - "WYSIWYG"
  - "Markdown"
  - "Supabase"
  - "GitHub"
  - "リアルタイム編集"
  - "ブログ"
  - "タスクリスト"
"date": "2026-01-06"
---

# Zola ブログ：WYSIWYG Markdown リアルタイム編集 + Supabase/GitHub バックエンドソリューション設計 - タスクリスト

## クイックリカバリー

**現在のフェーズ**: 完了（レビュー待ち）
**現在のタスク**: レビュー待ち：編集範囲/リアルタイムの意味/公開パス/認証/画像戦略の確認（`plan.md` 参照）
**進捗**: 8/8 タスク完了（設計ドキュメント準備完了）

---

## フェーズ 1: 現状監査と制約 ✅ 完了

- [x] 既存のテーマ/CSS変数、テンプレート構造、JS依存関係、デプロイ方法を監査し、維持すべきデザイン言語と技術的制約を明確にする。 | 受け入れ条件: `context.md` に既存のアーキテクチャ、CSSトークン/変数、再利用可能なコンポーネント/ページエントリポイント、および破壊すべきでない点を記録する。
- [x] 「リアルタイム編集」の意味（リアルタイムプレビュー/自動保存/マルチユーザー協働）を明確にし、レビューが必要な問題をリストアップする。 | 受け入れ条件: `plan.md` に未解決の問題とデフォルトの仮定をリストアップする。

---

## フェーズ 2: エディター選定調査 ✅ 完了

- [x] 埋め込み可能なWYSIWYG Markdownエディター（ビルド不要/純粋なJSソリューション + Reactソリューションをそれぞれ1-2個）をオンライン調査し、機能、サイズ、カスタマイズ/テーマ対応能力、画像アップロードフック、ライセンス、統合の複雑さを比較する。 | 受け入れ条件: `context.md` に比較表と推奨候補（リンク付き）を記述し、検証が必要/不確実な点を注記する。
- [x] 既存のsuCSS+CSS変数スタイルと一貫性のあるUI/テーマ適応戦略を提示する（新しいデザインシステムを導入しない、または最小限に抑える）。 | 受け入れ条件: `plan.md` にテーマ適応戦略と主要な実装ポイント（CSS変数マッピング、ダークモード、ボタン/フォームスタイル）を提示する。

---

## フェーズ 3: バックエンドとデータモデル設計 ✅ 完了

- [x] Supabaseソリューションを設計する：認証、RLS、テーブル構造、オブジェクトストレージ（画像）、フロントエンド直接接続方式。同時にGitHub Issue/Discussionソリューションを提示する：認証、権限、書き込み、同期戦略。 | 受け入れ条件: `context.md` に2つのソリューションのデータフロー、権限モデル、脅威ポイント、トレードオフの推奨事項を記述する。
- [x] 「編集結果」から「サイトコンテンツ」への公開/同期パスを定義する（手動バックエンドは作成しない）：例、GitHub Actionsによる同期、クライアントからのPR提出、または単なる下書きリポジトリ。 | 受け入れ条件: `plan.md` に推奨パス、代替パス、およびそれぞれの操作フローを明確にする。

---

## フェーズ 4: 統合ソリューション詳細設計と実装計画 ✅ 完了

- [x] 最終的な推奨エンドツーエンド設計を出力する：ページエントリ（`/admin`）、ルーティング/権限、エディター設定、保存/公開フロー、失敗時の回復、バージョン履歴（オプション）。 | 受け入れ条件: `plan.md` に実行可能な段階的実装計画（ファイル/ディレクトリレベル）を提示し、レビューが必要な重要な意思決定点を明示する。
- [x] 最小限の実用可能（MVP）範囲と今後の拡張（画像管理、下書き/公開、ロールバック、マルチユーザー協働など）をリストアップする。 | 受け入れ条件: `tasks.md` にチェックリスト形式でMVPとv2拡張を提示する。

---

## 新たに発見されたタスク

（現在なし）

---

## MVP（推奨範囲）

- [ ] `/admin` ページ：`reset.css`/`suCSS.css`/`style.css` を再利用し、既存のライト/ダーク切り替えを統合する（スタイルの一貫性を維持）。
- [ ] Supabase：`documents` テーブル + RLS（単一ユーザー許可リスト）を作成する。
- [ ] エディター：Vditorを統合（優先：IR/ソースモードでフォールバック）、「開く→編集→自動保存（デバウンス）」を実装する。
- [ ] Front matter 保護：フロントエンドでfront matterと本文を分割して保存/編集する（WYSIWYGによる書き換えを防ぐ）。
- [ ] 公開ボタン：`published_at`（またはboolean）を書き込み、「下書き/公開済み」を区別するために使用する。
- [ ] GitHub Actions：Supabaseから`published`ドキュメントを取得し、`content/**`に同期書き込みして`master`にコミットし、サイトデプロイをトリガーする。
- [ ] 競合戦略：デフォルトでSupabaseを真のソースとする。リポジトリの手動変更を検出した場合はフェイルファストし、手動処理を促す。

## v2（拡張項目）

- [ ] 画像アップロード：Supabase Storageと連携（ドラッグ＆ドロップ/貼り付けアップロード）、外部リンクMarkdownを自動挿入する。
- [ ] バージョン履歴：`document_revisions` テーブル（差分/ロールバック）、またはGitコミットにロールバックポイントを保持する。
- [ ] ローカルプレビュー一貫性：`/admin` 内で「Zolaレンダリングルールに基づくプレビュー」ヒントを提供する（少なくとも：コードハイライト、mermaid、ショートコードをそのまま表示）。
- [ ] 複数ドキュメント管理：`content/**` ツリーに基づく閲覧/検索/タグ付け。
- [ ] 権限拡張：マルチユーザー（協力者）と監査ログ。
- [ ] 公開フロー拡張：直接pushではなくPRを生成し、レビューを容易にする。

---

*最終更新: 2026-01-06 20:33*