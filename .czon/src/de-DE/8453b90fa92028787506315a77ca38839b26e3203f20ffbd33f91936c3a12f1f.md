---
"title": "Neues Blog eingerichtet: Ich habe meine Gcores-Talks ins Blog integriert"
"summary": "Dieser Artikel beschreibt detailliert den technischen Prozess, wie der Autor Inhalte von seinen Gcores-Talks in sein persönliches Blog migriert hat. Ausgehend von einem alten Blog, das aufgrund veralteter Abhängigkeiten nicht mehr funktionierte, erläutert der Artikel die technische Auswahl für das neue Blog (Zola-Generator und einfaches Theme). Der Schwerpunkt liegt auf dem vollständigen Ablauf: das Abrufen der Talk-Daten über eine API, deren Verarbeitung in Markdown-Format und die Implementierung einer interaktiven Bildergalerie mit Frontend-Technologien (HTML, CSS, JavaScript). Der Autor betont die Freude, die der schnelle Feedback-Zyklus in der Frontend-Entwicklung mit sich bringt, und reflektiert über die Bedeutung dieser technischen Übung."
"tags":
  - "Blog"
  - "Technik"
  - "Frontend-Entwicklung"
  - "Datenscraping"
  - "Zola"
  - "Gcores"
  - "Programmierfreude"
"date": "2024-06-18"
---

**Dieser Artikel entsprang meiner unsterblichen kindlichen Neugier.**

Im April, während einer Reise, hatte ich diesen starken Drang, einen Reisebericht zu schreiben, den ich zuerst auf Gcores veröffentlichte. Wie üblich wollte ich dann eine Markdown-Version für mein eigenes Blog erstellen.

Nachdem ich fertig war, stellte ich fest, dass mein Blog kaputt war.

## Das alte Blog

Der Trend, persönliche Blogs einzurichten, kam während meines dritten Studienjahres in unserer Fakultät auf. In diesem [Artikel](./da-hao-bo-ke-hou-de-yi-dian-hua/) von vor 7 Jahren, der mir heute peinlich ist, beschrieb ich meine ursprünglichen Gedanken beim Aufbau dieses Blogs.

Die Gründe waren: Erstens wollte ich mich dazu anhalten, etwas zu schreiben; zweitens wollte ich praktische Erfahrungen sammeln und einige moderne, in der Schule nicht gelehrte Technologien ausprobieren; und außerdem ist es einfach cool, eine eigene Domain zu haben, zumindest fand ich das.

Lassen Sie uns die damalige Szene nachspielen:

---

Nachdem ich etwas Neues gelernt hatte, notierte ich aufgeregt meine Ideen in einem Markdown-Dokument.

Nach dem Schreiben führte ich lässig ein paar Befehle aus, um das neue Blog hochzuladen:

```shell
$ git add .
$ git commit -m "new blog! hahahaha"
$ git push origin master
```

Dann öffnete ich begeistert die CI-Oberfläche – CI war damals noch recht modern, die DevOps-Idee war erst seit wenigen Jahren im Umlauf. Auf der Log-Seite der CI wartete ich darauf, dass das gesamte Blog, einschließlich dieses Artikels, zu einer statischen HTML-Website gebaut wurde, dass Travis die Build-Artefakte mit meinem Schlüssel in das Git-Repository pushte und dass Github die Artefakte veröffentlichte.

Schließlich ging ich auf meine Domain [https://blog.thrimbda.com](https://blog.thrimbda.com) und sah zufrieden, wie der neue Artikel ganz oben auf der Seite erschien.

---

Im Laufe der Jahre wurde dieser Prozess langweilig, langweilig und doch weiterhin effektiv, bis der Tag kam, an dem er versagte.

## Das neue Blog

Ende April versagten drei aufeinanderfolgende CI-Pipeline-Läufe. Ein kurzer Blick in die Logs zeigte, dass eine Build-Abhängigkeit aufgrund ihres Alters aus dem Internet verschwunden zu sein schien. Mir wurde klar, dass 7 Jahre in dieser Branche eine enorme Zeitspanne sind – lang genug, um Burgen zu zerstören und Berge zu verschlingen.

Also traf ich in Arbeitspausen mit einigen nicht sonderlich spannenden Anforderungen eine technische Entscheidung: **Einfach genug, bequem genug.**

So entstand dieses neue Blog, das ich wie üblich vorstellen muss:

-   Ich wählte [Zola](https://www.getzola.org/) als Generator;
-   Ich suchte ein sehr einfaches, aber hübsches [Theme](https://github.com/Speyll/anemome) aus;

Als Ersatz für das alte Blog war dieses neue damit fertig.

## Der verspielte Einrichtungsprozess

Vielleicht weil es neu genug war, oder weil die technische Wahl einfach genug war, vielleicht weil der Feedback-Zyklus der Frontend-Arbeit kurz genug ist, und weil die Zusammenarbeit mit Azheng mir zwangsläufig etwas Frontend-Wissen vermittelte und Wissenslücken aus dem ersten Studienjahr schloss, wurde das Herumspielen am Blog wieder interessant.

Einige bescheidene CSS-Anpassungen, die Integration eines neuen gitcus, das Hosten der Kommentare auf Github – ich war mit meinem Ich von vor sieben Jahren einer Meinung: Programmieren und an Projekten herumbasteln macht tatsächlich Spaß, es ist die Freude an der Arbeit, die Freude am Spiel.

Mit der Nachwirkung dieser Freude möchte ich (in selbstverliebter Manier) den technischen Prozess beschreiben, wie ich meine Gcores-Talks ins Blog integriert habe.

<!--more-->

---

### Die Daten

Bei einer früheren Erkundung hatte ich bereits festgestellt, dass Gcores Crawlern gegenüber äußerst freundlich ist. Seine Daten-APIs sind einheitlich und ausdrucksstark. Zum Beispiel bei der Erkundung meiner Talks:

![gcores-api-at-glance](https://0xc1.space/images/2024/06/18/gcores-api-at-glance.jpg)

Man erkennt, dass dies die API für die Abfrage der Talk-Daten ist:

```
https://www.gcores.com/gapi/v1/users/464460/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&before=1718720726.986&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege
```

#### Rohdaten

Lassen Sie uns die Informationen extrahieren:

```ts
const user = 464460;

const url = new URL(
  `https://www.gcores.com/gapi/v1/users/${user}/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege`
);
```

Bei genauerer Betrachtung scheint die Paginierung durch den Parameter `before` bestimmt zu werden. Indem man diesen Zeitstempel kontinuierlich nach vorne iteriert, bis keine Daten mehr zurückkommen, erhält man folgenden Code:

```ts
import {
  EMPTY,
  Observable,
  expand,
  map,
  mergeAll,
  mergeMap,
  of,
  shareReplay,
  skip,
  takeWhile,
  tap,
  toArray,
} from "https://esm.sh/rxjs@7.8.1";

const user = 464460;

const url = new URL(
  `https://www.gcores.com/gapi/v1/users/${user}/recommend?talk-include=topic%2Cuser%2Chelpful%2Cpoll-options%2Crelated-content.radio%2Crelated-content.video%2Crelated-content.article%2Crelated-content.game%2Crelated-content.film%2Crelated-content.album%2Crelated-content.album-bundle%2Crelated-content.product%2Crelated-content.discussion&original-include=user%2Cdjs%2Ccategory&order-by=time&fields[articles]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags&fields[videos]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Calbums%2Cpublished-albums&fields[radios]=title%2Cdesc%2Cexcerpt%2Cis-published%2Cthumb%2Capp-cover%2Ccover%2Ccomments-count%2Clikes-count%2Cbookmarks-count%2Cis-verified%2Cpublished-at%2Coption-is-official%2Coption-is-focus-showcase%2Cduration%2Cdraft%2Caudit-draft%2Cuser%2Ccomments%2Ccategory%2Ctags%2Centries%2Centities%2Csimilarities%2Clatest-collection%2Ccollections%2Coperational-events%2Cportfolios%2Ccatalog-tags%2Cmedia%2Cdjs%2Clatest-album%2Calbums%2Cis-free%2Cis-require-privilege`
);

const imageUrl = (image: string) =>
  `https://image.gcores.com/${image}?x-oss-process=image/quality,q_90/format,webp`;

// Paginierung
url.searchParams.set("before", `${Date.now() / 1000}`);

interface IGcoresTalk {
  text: string;
  images: string[];
  published_at: number;
  tags: string[];
}

const rawGcoresTalkData$: Observable<any[]> = of({
  before: Date.now() / 1000,
}).pipe(
  // Rohdaten
  expand(async ({ before }) => {
    url.searchParams.set("before", `${before}`);
    const res = await fetch(url);
    const data = await res.json();
    if (!data.data || data.data.length === 0) {
      return EMPTY;
    }
    return {
      before:
        new Date(
          data.data[data.data.length - 1].attributes["published-at"]
        ).getTime() / 1000,
      ...data,
    };
  }),
  skip(1),
  // Debug
  // take(1),
  takeWhile((v) => !!v.data),
  // filter((v) => v.data.length > 0),
  tap((v) => {
    console.info(v);
  }),
  toArray(),
  shareReplay(1)
);
```

So erhalten wir einen Rx-Stream, der alle Rohdaten der Talks eines Users enthält.

#### Datenverarbeitung

Mit den Rohdaten können wir nun Markdown generieren. Direkt zur Verarbeitung, die Hauptpunkte sind:

-   Entscheiden, welche Inhalte angezeigt werden sollen.
-   Die API-Felder von Gcores verstehen.

Talks sind ähnlich wie Freundeskreise oder Microblogs: Text mit Bildern und einigen Tags. Lassen Sie sie uns einfach flach anzeigen.

Die Daten eines Talks können wie folgt definiert werden:

```json
{
  "blocks": [
    {
      "data": { "spoiler": false },
      "depth": 0,
      "entityRanges": [{ "key": 0, "length": 1, "offset": 0 }],
      "inlineStyleRanges": [],
      "key": "7u4tf",
      "text": "-",
      "type": "atomic"
    },
    {
      "data": { "spoiler": false },
      "depth": 0,
      "entityRanges": [],
      "inlineStyleRanges": [],
      "key": "wisz4",
      "text": "核聚变好玩，和雨川西蒙合了影，见到了做志愿者的 merz，然而社恐差点没敢上前搭话，腿快走断了，给没能来的小朋友们买了点纪念品，Celeste 随机异变速通震撼我妈，全程硬是没把因为震惊而张开的大嘴合上。可惜周天广州下雨航班被取消所以急匆匆买了深圳回上海的高铁票就没去成周天的。",
      "type": "unstyled"
    },
    {
      "data":