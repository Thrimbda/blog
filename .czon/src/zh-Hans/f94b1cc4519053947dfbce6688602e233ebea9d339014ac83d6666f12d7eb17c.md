---
"title": "Notion MCP 在 OpenCode 中的配置与使用指南"
"summary": "本文是一份关于在 OpenCode 中设置和使用 Notion MCP 服务器的完整指南。文档首先确认了通过远程 MCP
  服务器成功完成配置，并提供了存储在 `opencode.json` 中的具体配置示例。接着说明了 OAuth
  认证已成功完成，认证令牌安全存储。文章核心部分详细阐述了如何使用 Notion
  工具，包括检查服务器状态、在提示中引用工具、以及可用的工具范围（如搜索页面、检索内容、管理数据库等）。此外，还提供了重新认证、注销以及故障排除的步骤。文档\
  也提到了作为替代方案的本地 MCP 服务器配置方法，并强调了安全注意事项。最后，文档标注了设置完成日期为 2026-01-18。"
"tags":
  - "Notion"
  - "MCP"
  - "OpenCode"
  - "配置指南"
  - "API 集成"
  - "自动化"
  - "开发工具"
"date": "2026-01-18"
---

# Notion MCP Setup for OpenCode

## Configuration Complete

Notion MCP has been successfully configured using OpenCode's remote MCP server. The configuration is stored in `opencode.json`:

```json
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "notion": {
      "type": "remote",
      "url": "https://mcp.notion.com/mcp",
      "enabled": true
    }
  }
}
```

## Authentication Status

✅ **Authenticated Successfully**

Your Notion account has been connected via OAuth. Authentication tokens are stored securely in OpenCode's local storage.

## How to Use

### 1. Check MCP Server Status
```bash
opencode mcp list
```

### 2. Use Notion Tools in OpenCode
When using OpenCode, you can reference Notion tools in your prompts. Example prompts:

```
Search for pages in my Notion workspace about "project planning" using the notion tools
```

```
List my recent Notion databases using the notion tools
```

```
Get the content of a specific Notion page using the notion tools
```

### 3. Available Notion Tools
The Notion MCP server provides tools for:
- Searching pages and databases
- Retrieving page content  
- Creating and updating pages
- Working with databases (now called data sources)
- Managing comments
- And more...

### 4. Re-authenticate if Needed
If authentication expires:
```bash
opencode mcp auth notion
```

### 5. Remove Authentication
```bash
opencode mcp logout notion
```

## Security Notes

- OAuth tokens are stored securely in `~/.local/share/opencode/`
- The remote MCP server (https://mcp.notion.com/mcp) is maintained by Notion
- Your Notion data access is limited to what you authorized during OAuth
- No local API tokens are needed or stored

## Troubleshooting

If tools don't appear to work:

1. Verify connection status:
   ```bash
   opencode mcp debug notion
   ```

2. Re-authenticate:
   ```bash
   opencode mcp logout notion && opencode mcp auth notion
   ```

3. Check OpenCode logs for errors

## Alternative: Local MCP Server

If you prefer to use the local MCP server with your API token instead of OAuth:

1. Update `opencode.json`:
```json
{
  "$schema": "https://opencode.ai/config.json",
  "mcp": {
    "notion": {
      "type": "local",
      "command": ["npx", "-y", "@notionhq/notion-mcp-server"],
      "environment": {
        "NOTION_TOKEN": "{env:NOTION_TOKEN}"
      }
    }
  }
}
```

2. Update `.env` file:
```
NOTION_TOKEN=your_notion_integration_token_here
```

3. Restart OpenCode

---

**Setup completed on: 2026-01-18**