---
"title": "Zola Blog Real-time Editing and Backend Solution Design"
"summary": "This document provides a detailed analysis of the current state of the Zola blog site, including its tech stack, design language, and content characteristics. It proposes a solution design for implementing WYSIWYG Markdown real-time editing. The core recommendation is to use Vditor as the editor and Supabase as the backend for storage and authentication, emphasizing no need to introduce a build chain while maintaining the existing minimalist JS style and suCSS design language. The document also explores key decision points such as editing scope and publishing workflow, and provides alternative options for the editor and backend to ensure the solution aligns with the existing project and is easy to implement."
"tags":
  - "Zola"
  - "Markdown"
  - "WYSIWYG"
  - "Supabase"
  - "Real-time Editing"
  - "Blog"
  - "Frontend"
  - "Design"
"date": "2026-01-06"
---

# Zola Blog: WYSIWYG Markdown Real-time Editing + Supabase/GitHub Backend Solution Design - Context

## Session Progress (2026-01-06)

### âœ… Completed

- Preliminary audit of the current state: The project is a Zola site with a theme based on anemone + suCSS. It currently uses minimal JS and allows CDN dependencies.

### ðŸŸ¡ In Progress

- Output a detailed design for review (editor/backend selection + publishing/synchronization workflow + implementation steps).

### âš ï¸ Blocked/Pending

- Clarify the precise meaning of "real-time editing" (real-time preview vs. auto-save vs. multi-user collaboration).
- Define the editing scope (editing only a few pages/single files vs. the entire site's `content/`).
- Determine the publishing workflow (only saving drafts vs. synchronizing to `content/` to trigger a Zola build).

---

## Key Files

- `config.toml`: Site configuration and navigation; default theme is light, supports multiple languages.
- `templates/head.html`: Globally imports `static/css/reset.css`, `static/css/suCSS.css`, `static/css/style.css`, and `static/js/script.js`, and imports `rxjs`, `highlight.js`, `mermaid` via CDN.
- `static/css/suCSS.css`: Design tokens (CSS variables) and base component styles (forms, buttons, tables, etc.); includes light/dark theme variables.
- `static/css/style.css`: Site-specific custom styles (navigation, footer, slider, shortcode styles, etc.).
- `static/js/script.js`: Theme switching (`data-theme` + localStorage) and slider interaction; can be reused in admin pages to maintain a consistent experience.
- `content/**`: Markdown content source; includes YAML front matter (`---`) and shortcodes (e.g., `{{ slideshow(...) }}`).

---

## Key Decisions

| Decision | Reason | Alternative | Date |
|------|------|----------|------|
| Default recommendation: "Pure JS admin page + Supabase storage/authentication", with Vditor as the priority editor for evaluation | The current project has no Node/React build chain; existing convention of CDN dependencies; Vditor offers WYSIWYG/IR/SV three modes and is positioned as a "browser-side Markdown editor", offering the lowest integration cost | React + shadcn + Milkdown/TipTap; or using GitHub Discussion/Issue as the backend | 2026-01-06 |

---

## Current State Audit Summary

### Tech Stack/Deployment

- The site is built with Zola (`config.toml`), deployed to `gh-pages` via GitHub Actions using `shalzz/zola-deploy-action` (`.github/workflows/*.yaml`).
- The site leans towards "minimalist JS": the only site-wide script is `static/js/script.js`, others are from CDN (`rxjs`, `highlight.js`, `mermaid`).

### Theme & Design Language (Must be preserved)

- Visuals are based on CSS variables from `suCSS.css`: `--bg/--bg-light/--text/--text-light/--accent/--accent-light/--link/--border`, etc.
- Theme switching mechanism: `document.documentElement[data-theme="light"|"dark"]`, synchronized with `prefers-color-scheme` + localStorage (see `static/js/script.js`).
- Component style: Buttons/forms/tables/list markers, etc., are defined in `suCSS.css`; new UI should prioritize reusing these semantic elements and variables, not introducing a new design system.

### Content Characteristics (Impact on Editor)

- Markdown may contain:
  - YAML front matter (example: `content/gcores-talks.md`)
  - Zola shortcodes (example: `{{ slideshow(...) }}`, templates located in `templates/shortcodes/*`)
  - Highlighted code blocks, mermaid code blocks
- Risk point: If a WYSIWYG editor attempts to "understand/render" shortcodes, it might rewrite or swallow the original text; an editor/mode that "preserves unknown syntax as-is" is needed, or a "source mode" fallback should be provided in the editor.

---

## Editor Research (Online + Documentation)

> Goal: Embeddable, supports WYSIWYG (rich text/what-you-see-is-what-you-get) and outputs Markdown; preferably no build chain required (pure JS/CDN).

| Candidate | Positioning/Modes | Integration Form | Theme/Customization | Key Points | Conclusion for This Project |
|---|---|---|---|---|---|
| **Vditor** | Browser-side Markdown editor; supports WYSIWYG/IR (Typora-like)/SV split-screen | Native JS; mature official site and CDN form (page copy explicitly emphasizes three modes) | Comes with many themes and configurable options; can be adapted to suCSS via CSS variables | Supports real-time saving, paste/drag-and-drop upload, etc. (see official site description); MIT License (`https://unpkg.com/vditor@3.10.4/LICENSE`) | **Top Recommendation**: Best match for "no build chain + real-time editing"; need to verify "shortcodes/Front matter are not corrupted" |
| **TOAST UI Editor** | Markdown/WYSIWYG dual mode | CDN (`uicdn.toast.com/editor/latest/...`) or npm | Has theme/style system; can be adapted via custom CSS | Documentation explicitly supports CDN and turning off `usageStatistics` (`https://unpkg.com/@toast-ui/editor@3.2.2/README.md`) | Alternative: Mature but style system is "heavier", adapting to suCSS theme might be more costly; license to be confirmed during integration |
| **Milkdown** | Plugin-based WYSIWYG Markdown editor (Typora style), ProseMirror + remark | Typically requires a bundler (React/Vue, etc.) | Highly customizable, but high engineering cost | README explicitly states its WYSIWYG Markdown positioning and MIT license (`https://raw.githubusercontent.com/Milkdown/milkdown/main/README.md`) | Suitable as a candidate if "moving to React/shadcn"; does not match the current Zola project (requires introducing a build chain) |
| **TipTap** | Rich text editor toolkit (more focused on HTML/Schema) | React/Vue/Svelte, etc. | Strong customization, but Markdown often requires extra conversion and constraints | Official site emphasizes "real time collaboration", etc., but Markdown-first is not the core | Not recommended as the first choice (Markdown and shortcode scenarios are complex) |

---

## Backend Research (No Custom Backend Required)

| Solution | Requires Self-hosted Service? | Authentication/Permissions | Storage/History | Relationship with Zola Publishing | Conclusion |
|---|---|---|---|---|---|
| **Supabase** | No (managed DB/Auth/Storage) | Frontend direct connection + RLS; anon key can be public | Row-level history in DB requires custom setup (can create revisions table) | Requires "synchronization to repo/content" to affect the static site | **Default Recommendation**: Most straightforward implementation; clear security boundaries (RLS); image storage is also easy |
| **GitHub Issue/Discussion** | Theoretically no service needed, but often requires an OAuth token exchange service in practice | OAuth flow is complex (difficult to handle token exchange securely in pure frontend) | GitHub inherently has history/audit | Synchronizing to the site still requires scripts to convert issues/discussions to `content/` | Alternative: Consider if you strongly desire "content as GitHub data"; but authentication/upload/synchronization complexity is higher |

Note: GitHub Docs' OAuth web flow explicitly requires providing both `client_id` and `client_secret` in the "exchange code for access token" step, making it difficult to securely implement "pure frontend directly connecting to GitHub as a write backend" (unless introducing a token exchange service or using restricted schemes like device flow).

---

## Quick Handover

**Continue from here next time:**

1. In `plan.md`, confirm the default assumptions for "real-time editing/editing scope/publishing workflow" and the decision points requiring your review.
2. Based on your feedback, finalize the recommendation and solidify implementation steps among the three solution sets (Supabase / GitHub Discussions / React-based).

**Important Notes:**

- Any UI (including admin) must reuse the CSS variables and light/dark mechanism from `suCSS.css`, without introducing new theme systems that break the style.
- Need to verify: Whether the editor will rewrite Zola shortcodes and front matter.

---

*Last updated: 2026-01-06 20:30 by Codex*