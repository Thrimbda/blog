---
"title": "First Steps into Concurrency"
"summary": "The author of this article was introduced to concurrent programming through a small assignment, creating a simple demo using Python's queue, signal, and time modules to demonstrate inter-thread communication via a message queue. The article explains the roles of queue as a message queue, signal for capturing KeyboardInterrupt, and time for main thread responsiveness. It also explores the design philosophy of using message queues to reduce system coupling in multi-threaded environments, emphasizing the importance of 'designing for change.'"
"tags":
  - "python"
  - "concurrency"
  - "multithreading"
  - "message queue"
  - "queue"
  - "signal"
  - "time"
"date": "2017-05-07"
---

---
title: First Steps into Concurrency
date: 2017-05-07
taxonomies:
  tags:
    - python
    - concurrency
---

Great! A recent small assignment gave me a hands-on introduction to meaningful concurrent programming.

<!--more-->

## Demo

So, I created a small, illustrative demo using Python's `queue`, `signal`, and `time` modulesâ€”though it's not truly multi-threaded:

```python
# -*- coding: utf-8 -*-
# @Author: Michale
# @Date:   2017-05-04 15:00:41
# @Last Modified by:   Michale
# @Last Modified time: 2017-05-07 00:46:52
import signal
import queue
import time


class TestClass(object):
    queue = queue.Queue()

    def __init__(self):
        signal.signal(signal.SIGINT, self.stopIfPressKill)

    def stopIfPressKill(self, mySignal, stack):
        if mySignal == signal.SIGINT:
            print('you pressed CTRL-C')
            self.queue.put_nowait('stop')
            print(self.queue.qsize())

    def mainThread(self):
        while True:
            time.sleep(1)
            if not self.queue.empty():
                data = self.queue.get()
                print(data)
                if data == 'stop':
                    break
                else:
                    self.queue.put(data)


if __name__ == '__main__':
    yoo = TestClass()
    yoo.mainThread()

```

Let me explain the roles of the three modules:

- `queue`: Acts as a message queue, though it's a bit overkill for this simple use case.
- `signal`: Used to capture `KeyboardInterrupt` and place a stop signal into the message queue.
- `time`: Allows the main thread to detect this `KeyboardInterrupt`.

## Philosophy

The introduction of multithreading makes it difficult to control non-main threads once they start, which forces the use of mechanisms like message queues for inter-thread communication.

However, regardless of whether multithreading is involved, system modules should encapsulate their details and use events to coordinate their work. This greatly helps reduce system coupling and reflects a good design philosophy: **design for change.**