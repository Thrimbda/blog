---
"title": "Zola Blog: Real-time Editing and Backend Solution Design"
"summary": "This document outlines a design proposal for adding WYSIWYG real-time editing capabilities to an existing Zola static blog site. It begins with a current state audit, confirming the site's tech stack (Zola + GitHub Actions deployment) and the design language that must be preserved (CSS variables and theme switching based on suCSS.css). The core sections research multiple Markdown editors (highlighting Vditor) and backend solutions requiring no custom server code (highlighting Supabase), comparing their pros, cons, and suitability. The document also clarifies key pending decisions, such as the precise meaning of 'real-time editing', the scope of edits, and the publication workflow. The ultimate goal is to design an editing and publishing system that does not introduce a complex build chain, maintains the existing site's style, and can safely handle Zola shortcodes and Front Matter."
"tags":
  - "Zola"
  - "WYSIWYG"
  - "Markdown Editor"
  - "Supabase"
  - "Static Blog"
  - "Real-time Editing"
  - "Vditor"
  - "Solution Design"
"date": "2026-01-06"
---

# Zola Blog: WYSIWYG Markdown Real-time Editing + Supabase/GitHub Backend Solution Design - Context

## Session Progress (2026-01-06)

### âœ… Completed

- Preliminary current state audit: The project is a Zola site, theme based on anemone + suCSS, currently uses minimal JS and allows CDN dependencies.

### ðŸŸ¡ In Progress

- Output a detailed design for review (editor/backend selection + publish/sync workflow + implementation steps).

### âš ï¸ Blocked/Pending

- Precise meaning of "real-time editing" (real-time preview vs. auto-save vs. multi-user collaboration).
- Edit scope (editing only a few pages/single file vs. the entire site's content).
- Publication workflow (only saving drafts vs. syncing to `content/` to trigger a Zola build).

---

## Key Files

- `config.toml`: Site configuration and navigation; default theme is light, supports multiple languages.
- `templates/head.html`: Site-wide inclusion of `static/css/reset.css`, `static/css/suCSS.css`, `static/css/style.css`, and `static/js/script.js`, plus CDN imports for `rxjs`, `highlight.js`, and `mermaid`.
- `static/css/suCSS.css`: Design tokens (CSS variables) and base component styles (forms, buttons, tables, etc.); includes light/dark theme variables.
- `static/css/style.css`: Site-specific custom styles (navigation, footer, slider, shortcode styles, etc.).
- `static/js/script.js`: Theme switching (`data-theme` + localStorage) and slider interaction; can be reused in admin pages for consistent experience.
- `content/**`: Markdown content source; contains YAML front matter (`---`) and shortcodes (e.g., `{{ slideshow(...) }}`).

---

## Key Decisions

| Decision | Reason | Alternative | Date |
|------|------|----------|------|
| Default recommendation: "Pure JS admin page + Supabase storage/auth", with Vditor as the primary editor candidate | Current project has no Node/React build chain; existing convention of CDN dependencies; Vditor offers WYSIWYG/IR/SV modes and is positioned as a "browser-side Markdown editor", offering the lowest integration cost | React + shadcn + Milkdown/TipTap; or using GitHub Discussion/Issue as backend | 2026-01-06 |

---

## Current State Audit Summary

### Tech Stack/Deployment

- Site is built with Zola (`config.toml`), deployed to `gh-pages` via GitHub Actions using `shalzz/zola-deploy-action` (`.github/workflows/*.yaml`).
- Site leans towards "minimal JS": current site-wide script is `static/js/script.js`, others are CDN (`rxjs`, `highlight.js`, `mermaid`).

### Theme & Design Language (Must be Preserved)

- Visuals based on CSS variables from `suCSS.css`: `--bg/--bg-light/--text/--text-light/--accent/--accent-light/--link/--border`, etc.
- Theme switching mechanism: `document.documentElement[data-theme="light"|"dark"]`, synchronized with `prefers-color-scheme` + localStorage (see `static/js/script.js`).
- Component style: Buttons/forms/tables/list markers, etc., are defined in `suCSS.css`; new UI should prioritize reusing these semantic elements and variables, not introducing a new design system.

### Content Characteristics (Impacts Editor)

- Markdown may contain:
  - YAML front matter (example: `content/gcores-talks.md`)
  - Zola shortcodes (example: `{{ slideshow(...) }}`, templates in `templates/shortcodes/*`)
  - Highlighted code blocks, mermaid code blocks
- Risk: A WYSIWYG editor attempting to "understand/render" shortcodes might rewrite or swallow the original text; need an editor/mode that "preserves unknown syntax as-is", or provides a "source mode" as a fallback in the editor.

---

## Editor Research (Online + Documentation)

> Goal: Embeddable, supports WYSIWYG (rich text/what-you-see-is-what-you-get) and outputs Markdown; preferably no build chain required (pure JS/CDN).

| Candidate | Positioning/Modes | Integration Form | Theme/Customization | Key Points | Suitability for This Project |
|---|---|---|---|---|---|
| **Vditor** | Browser-side Markdown editor; supports WYSIWYG/IR (Typora-like)/SV split-screen | Native JS; mature official site and CDN form (page copy explicitly emphasizes three modes) | Comes with many themes and configurable options; can be adapted to suCSS via CSS variables | Supports real-time save, paste/drag-and-drop upload, etc. (see official site description); MIT License (`https://unpkg.com/vditor@3.10.4/LICENSE`) | **Top Recommendation**: Highest match for "no build chain + real-time editing"; need to verify "shortcodes/Front matter not corrupted" |
| **TOAST UI Editor** | Markdown/WYSIWYG dual mode | CDN (`uicdn.toast.com/editor/latest/...`) or npm | Has theme/style system; can be adapted via custom CSS | Documentation explicitly supports CDN and turning off `usageStatistics` (`https://unpkg.com/@toast-ui/editor@3.2.2/README.md`) | Alternative: Mature but style system is "heavier", adapting theme to suCSS might be more costly; license to be confirmed during integration |
| **Milkdown** | Plugin-based WYSIWYG Markdown editor (Typora style), ProseMirror + remark | Usually requires a bundler (React/Vue, etc.) | Highly customizable, but engineering cost is high | README clearly states its WYSIWYG Markdown positioning and MIT license (`https://raw.githubusercontent.com/Milkdown/milkdown/main/README.md`) | Suitable as a candidate if "moving to React/shadcn"; does not match current Zola project (requires introducing a build chain) |
| **TipTap** | Rich text editor toolkit (more focused on HTML/Schema) | React/Vue/Svelte, etc. | Strong customization, but Markdown often requires additional conversion and constraints | Official site emphasizes "real time collaboration", etc., but Markdown-first is not the core | Not recommended as first choice (Markdown and shortcode scenarios are complex) |

---

## Backend Research (No Custom Server Code)

| Solution | Requires Self-hosted Service? | Auth/Permissions | Storage/History | Relationship with Zola Publication | Conclusion |
|---|---|---|---|---|---|
| **Supabase** | No (managed DB/Auth/Storage) | Frontend direct connection + RLS; anon key can be public | Row-level history in DB requires custom setup (can create revisions table) | Requires "sync to repo/content" to affect static site | **Default Recommendation**: Most straightforward implementation; clear security boundaries (RLS); image storage also easy |
| **GitHub Issue/Discussion** | Theoretically service-less, but often requires OAuth token exchange service | OAuth flow is complex (hard to handle token exchange securely in pure frontend) | GitHub inherently has history/audit | Syncing to site still requires scripts to convert issues/discussions to `content/` | Alternative: Consider if you strongly desire "content as GitHub data"; but auth/upload/sync complexity is higher |

Note: GitHub Docs' OAuth web flow explicitly requires providing both `client_id` and `client_secret` in the "exchange code for access token" step, making it difficult to securely implement "pure frontend directly connecting to GitHub as a write backend" (unless introducing a token exchange service or using a restricted scheme like device flow).

---

## Quick Handover

**Continue from here next time:**

1. In `plan.md`, confirm the default assumptions for "real-time editing/edit scope/publication workflow" and the decision points requiring your review.
2. Based on your feedback, finalize the recommendation and solidify implementation steps among the three solution sets (Supabase / GitHub Discussions / React-based).

**Important Notes:**

- Any UI (including admin) must reuse the CSS variables and light/dark mechanism from `suCSS.css`, not introduce a new theme system that breaks the style.
- Need to verify: whether the editor will rewrite Zola shortcodes and front matter.

---

*Last Updated: 2026-01-06 20:30 by Codex*