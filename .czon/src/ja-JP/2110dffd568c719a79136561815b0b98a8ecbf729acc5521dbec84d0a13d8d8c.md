---
"title": "実習ログ（二）：バックエンドAPIサーバー開発のまとめ"
"summary": "本稿は、筆者が実習期間中にプロジェクトリーダーとしてバックエンドAPIサーバーを開発した際のまとめログです。プロジェクト「Seed」（WeChatミニプログラムを主軸とした目標管理システム）の設計思想について詳述しており、明確なプロダクトポジショニング、システム特性（ユーザーシステム、目標管理、WeChat互換性など）、およびRESTful APIアーキテクチャを含みます。実装面では、Springフレームワーク群を技術スタックとして選択し、開発プロセスにおけるテスト駆動開発の実践について共有しています。また、プロジェクトマネージャーとしての進捗管理、人員配分、技術トレーニングにおける不足点を振り返り、ソフトウェアエンジニアに求められるシステムアーキテクチャ能力とアルゴリズム実装能力のバランスについて論じています。最後に、筆者はこの実習が授業教育の不足を補う効果的な手段であり、成績と能力の矛盾を回避する一助となると考えています。"
"tags":
  - "実習"
  - "バックエンド開発"
  - "プロジェクト管理"
  - "Springフレームワーク"
  - "WeChatミニプログラム"
  - "RESTful API"
  - "ソフトウェア設計"
  - "学習まとめ"
"date": "2017-03-12"
---

---
title: 実習ログ（二）
date: 2017-03-12 16:09:19
taxonomies:
  tags:
    - 日常
    - 実習
    - 所感
---

実習も終盤に差し掛かり、バックエンドAPIサーバーの基本版のコーディング作業がほぼ完了しました。ここでまとめておきたいと思います。

プロジェクトチームのリーダーとして、私のソフトウェアプロジェクト管理に関する唯一の知識は、冬休みに一度読んだ『人月の神話』に由来するものです。今回の実践を通じて、自分がいかに未熟であるかを痛感しました。それでも、いくつかのことを学べたと考えています。

<!--more-->

## 設計

2年前、C言語の課題で何も考えずにVisual Studioを開いてコードを書き始めた頃と比べると、今の自分には明らかに変化がありました。

~~まず、Visual Studioは久しく開いていません。~~

とにかくこの2年間、私は純粋にPythonを学んでいた時期の練習、ロボットチームでロボットの上位コンピュータを書いたときの経験、教務処ウェブサイトの教員・学生向けクローラーの作成、あるいは「橙汁」プロジェクトに参加した際のファイル管理ツールの開発など、集中的にコードを書いたいくつかの経験を経てきました。最初はもちろん勢い任せでしたが、前後矛盾する苦い経験を重ねるうちに、事前設計の重要性を知ることになりました。設計の世界に入った後は、その程度の問題となります。したがって、今回プロジェクト全体を統括した経験は、非常に有益な練習となりました。

**まず何を作るかを明確にする**ことは、プロダクトを作りたいと考えるチームにとって極めて重要です。**自社プロダクトを定義する**ことは、戦略レベルの課題です。しかし残念ながら、今回は特に面白いアイデアはありませんでした。責任を負っている以上、信頼性が高くシンプルなプロジェクトを真剣に作り上げることが、私自身のこの実習への期待でした。

要するに、**WeChatミニプログラムを主な特徴とする従来型のWebアプリケーション**——具体的には目標管理システムを作ることです。

これは非常に多くの人が手掛けている分野であるため、直面する事象のモデル化については、多くの成熟したソリューションを見つけることができます。例えば、プロジェクト指向のWorktile、個人の生活管理向けのWonderList、学生向けのMy Study Life、さらにはAppleの「リマインダー」や、聞いたことはあるが使ったことのないその他のツールなどです。これらのツールの特徴を総合し、古典的でWeChatらしい目標管理システムをまとめ上げる——これが私たちが作ろうとした「Seed」となりました。

### 備えるべき特性

では、「Seed」にはどのようなことができるべきでしょうか？

+ シンプルなユーザーシステムを持ち、同期を容易にし、ユーザーの定着率を高める。
+ ユーザーは自由に目標を作成・管理でき、この目標はWorktileの「プロジェクト」に類似する。
+ ユーザーは他人の目標に招待されることができる。
+ 目標は、日常的なチェックイン型（繰り返し）とプロジェクト達成型（一回限り、マイルストーンを導入可能）に分けられる。
+ 主なフロントエンドはWeChatミニプログラムとする。
+ その他の潜在的なクライアントにも対応する。

このように見ると、「Seed」は小さく洗練された実用的なサービスであるべきであり、これはWeChatミニプログラムの本来の目的とも一致しています。

ここで「**小さく洗練されている**」という特徴を強調しなければなりません。なぜ小さくシンプルであるべきなのでしょうか？ 一つは、人手と時間が限られているからです。二つ目は、『人月の神話』で言及されている「**第二システム効果**」が陥りやすい過ち——盲目的な自信から、プロジェクトに際限なく冗長な機能を追加してしまうこと——を避けるためです。これは、特に広告収入に関わらない私たちにとっては、労多くして益の少ない愚かな行為です。簡単な例を挙げれば、Mac OS版のThunderとWindows版のThunderでは、誰もがシンプルで使いやすいMac版を好むでしょう。

同時に、WeChatミニプログラムとの良好な互換性も必要です。ユーザーがスムーズに使用できるようにするため、メールアドレスをユーザー名としてログインをサポートする一方で、WeChatのopenIdをログイン認証情報としてもサポートすべきです。

### システムの構造

前述のように、WeChatミニプログラムを主な特徴とするWebアプリケーションを作るということは、「Seed」が他のフロントエンドとの互換性を持つ能力~~と野心~~を持つことを意味します。したがって、RESTfulスタイルのAPIが最適な選択となります。フロントエンドとバックエンドが完全に分離され、構造が明確で、消費（利用）が容易だからです。

したがって、「Seed」は、WeChatミニプログラムやその他の潜在的な形態をフロントエンドとし、HTTPプロトコルを通じてバックエンドが提供する「リソース」を消費するシステムとなるべきです。

バックエンドはAPIを通じて、安全で信頼性の高いサービスを提供します。

このためにいくつか学び、HATEOAS（Hypermedia As The Engine Of Application State、超媒体によるアプリケーション状態エンジン）の思想にも触れました。まだ成熟していませんが、未来の可能性の一つです。

## 実装

APIサーバーのコーディング作業にのみ参加したため、ここではバックエンドの実装についてのみ述べます。

私は設計を戦略レベル（「道」）に分類し、残りの作業を戦術レベル（「術」）に分類するのが好きです。したがって、どの技術を選び、具体的にどのようにシステムを実装するかは、ここに含まれると言えます。

### 技術

実習の要件と、Java言語を適切に使用したいという願望から、バックエンドフレームワークとして`Spring Framework`を選択し、合わせてSpringフレームワーク群を使用しました：

+ Spring Bootをアプリケーションコンテナとして
+ Spring Frameworkでビジネスロジックを実装
+ Spring DataをDAOとして
+ Spring Sessionでセッション管理
+ Spring testでテスト

さらに、Git、TravisCi、Herokuなどのツールを使用して開発体験を向上させました。

### 開発プロセス

以前にも触れましたが、SpringのControllerの記述体験はPythonのFlask Webフレームワークの体験と非常に似ています。もしかするとFlaskはSpringから何らかのインスピレーションを得たのでしょうか？ リソース指向のコントローラークラスは、各リソースごとにServletを書かなければならない従来のJava Webと比べて、はるかにコンパクトだと考えます。

Springはテスト駆動開発を推奨していますが、実際にこれを実行するのは容易なことではありません。テストは必ずしも好まれる作業ではないからです。専任者を割り当ててテストコードを書かせる場合、学習コストが非常に高く、また人間関係上の問題も生じます。そこで開発中、私は各メンバーが自分で書いたコードのテストを担当するように決めました。最終的に私がコードをレビューすることにしました。

## まとめ

「Seed」自体に関する話すべき部分は以上です。次に、他のことについて話したいと思います。

### 自分自身についてのまとめ

実習で多くのことを学びましたが、まだ問題もあります。

プロジェクトマネージャーとしては、私は全くの未熟者でした。進捗管理、人員配分、その他の細部の把握において、多くの不足点がありました。

例を挙げると：

- フロントエンド技術に関する知識の不足により、今回のプロジェクトでは最終的にAPIサーバーしか動作しない可能性が高い。
- プロジェクトチームの半数しか実際に参加していない。
- 参加者のトレーニングが抽象的で、忍耐力に欠けていた。

明らかに、私はさらに鍛錬を積む必要があります。しかし同時に、プロジェクトマネージャーと開発者を兼ねる立場は、別の問題についての考察を引き起こしました。

### SEerに求められる二つの能力についての考察

**システム全体のアーキテクチャと統制能力**と、**単一機能を実現するためのアルゴリズムの選択、調整、使用能力**です。

私の所属するソフトウェア学部の授業教育は、後者のみに焦点を当てているようです。これは特に不思議なことではありません。なぜなら、アルゴリズムの習熟度は測定しやすく、能力の優劣が明確に現れやすいからです。数学の問題を解くのと同じで、厳密な前提条件と制限の下では、人々の創造性は非常に評価しやすいものです。しかし、この「厳密な前提条件と制限」を適切に設定する能力は重要であるにもかかわらず、測定が困難です。

なぜ自己矛盾と言うのか、わかりやすく、しかし必ずしも完全に適切とは言えない例を挙げます。多くの親が、学業に支障をきたすことを理由に子供の早恋を厳しく禁じながら、卒業後すぐに家庭を築くことを期待する考え方は、幼稚で非現実的であると誰もが知っています。そして、**単に**良い学業成績だけを持っている学生が、卒業後に万能の才を持つようになることを暗黙のうちに期待することも、やや歪んだ考え方です。この二つの状況の違いは、後者の矛盾が前者ほど鋭くないことです。

このような実習は、確かに授業教育の不足を補うためのものであり、教育手段としての**成績**と教育目標としての**能力**という二つの記号が表すものの間の矛盾を回避する機会となり得ると考えています。